<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LAB BOX ‚Äì Dashboard</title>

  <!-- =======================
       üîΩ SWITCH DROPDOWN LAB BOX 
       Bootstrap CSS
       ======================= -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- ======================= -->

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    /* =======================
       ‚òÖ ‡∏Å‡∏£‡∏≤‡∏ü‡∏ß‡∏á‡∏Å‡∏•‡∏° (gauge) ‡πÉ‡∏´‡∏ç‡πà (‡πÄ‡∏î‡∏¥‡∏°)
       - ‡πÉ‡∏ä‡πâ grid + conic-gradient ‡∏ó‡∏≥ progress
       ======================= */


    /* CO2 */

    /* =======================
       ‚òÖ ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ò‡∏µ‡∏° + ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å (‡πÄ‡∏î‡∏¥‡∏°)
       ======================= */
    :root {
      --bg: #f0f2f5;
      --panel: #ffffff;
      --ink: #121619;
      --muted: #6b7280;
      --brand: #b7f36a;
      --accent: #9ad83f;
      --accent-dark: #94c93e;
      --sidebar: #ffffff;
      --sidebar-border: #cde88b;
      --tab-height: 40px;
      --sidebar-width: 220px;
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial, Helvetica, sans-serif;
      color: var(--ink);
      background: var(--bg);
    }

    .app {
      display: grid;
      grid-template-columns: var(--sidebar-width) 1fr;
      grid-template-rows: auto 1fr;
      height: 100vh;
    }

    /* Topbar (‡πÄ‡∏î‡∏¥‡∏°) */
    .topbar {
      grid-column: 1/-1;
      background: var(--panel);
      border-bottom: 1px solid #e5e7eb;
      position: relative;
    }

    .topbar-inner {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 10px 16px;
    }

    .brand-badge {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
    }

    .brand-logo {
      height: 34px;
    }

    .brand-text {
      font-weight: 700;
      letter-spacing: .5px;
    }

    .title {
      background: var(--panel);
      border: 1px solid var(--sidebar-border);
      padding: 0 12px;
      border-radius: 6px;
      font-weight: 700;
      margin-right: 10px;
      font-size: 22px;
      color: #0f172a;
      letter-spacing: .5px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, .08);
    }

    .tabs {
      flex: 1;
      display: flex;
      align-items: flex-end;
      height: var(--tab-height);
      background: var(--brand);
      border-left: 1px solid var(--sidebar-border);
      border-right: 1px solid var(--sidebar-border);
      border-top-left-radius: 6px;
      border-top-right-radius: 6px;
      overflow-x: auto;
      scrollbar-width: none;
    }

    .tabs::-webkit-scrollbar {
      display: none
    }

    .tab {
      position: relative;
      height: var(--tab-height);
      line-height: var(--tab-height);
      padding: 0 18px;
      font-size: 13px;
      color: #1f2937;
      cursor: pointer;
      user-select: none;
    }

    .tab.active {
      font-weight: 600;
      border-bottom: 3px solid #3a3a3a;
    }

    .tab:hover {
      background: rgba(0, 0, 0, .04);
    }

    /* NOTE: ‡∏à‡∏±‡∏î clock ‡πÑ‡∏õ‡∏Ç‡∏ß‡∏≤‡∏î‡πâ‡∏ß‡∏¢ .topbar-right (‡πÄ‡∏î‡∏¥‡∏°) */
    .clock {
      position: absolute;
      right: 14px;
      top: 8px;
      text-align: right;
      font-size: 13px;
    }

    .clock .date,
    .clock .time {
      font-weight: 700;
    }

    .topbar-right {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .topbar-right .clock {
      position: static;
    }

    /* Sidebar (‡πÄ‡∏î‡∏¥‡∏°) */
    .sidebar {
      grid-row: 2/-1;
      background: var(--sidebar);
      border-right: 2px solid var(--sidebar-border);
      display: flex;
      flex-direction: column;
      min-width: 0;
    }

    .side-header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 14px;
      border-bottom: 1px solid var(--sidebar-border);
      font-weight: 600;
    }

    .side-logo {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
    }

    .side-logo img {
      height: 38px;
    }

    .side-section {
      padding: 10px 14px;
      font-size: 13px;
      color: #111;
    }

    .menu {
      padding: 8px 8px 18px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .menu-btn {
      display: grid;
      grid-template-columns: 44px 1fr;
      align-items: center;
      gap: 10px;
      padding: 10px 8px;
      border-radius: 8px;
      border: 1px solid transparent;
      cursor: pointer;
      text-align: left;
      background: #fff;
      transition: .2s ease;
      color: #111;
    }

    .menu-btn:hover {
      border-color: var(--accent);
      background: #fafff1;
    }

    .menu-btn.active {
      background: #eaffc8;
      border-color: var(--accent);
      font-weight: 600;
    }

    .ico img {
      width: 40px;
      height: 40px;
      display: block;
    }

    /* Content shell (‡πÄ‡∏î‡∏¥‡∏°) */
    .content {
      grid-column: 2/-1;
      grid-row: 2/-1;
      background: var(--panel);
      margin: 12px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, .05);
      border: 1px solid #e5e7eb;
    }




    .muted {
      color: var(--muted);
    }




    /* =======================
       ‚òÖ Dropdown style (‡πÄ‡∏î‡∏¥‡∏°)
       ======================= */
    .sidebar .dropdown .btn {
      background: #ffffff;
      border-radius: 12px;
      font-weight: 600;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      transition: all .3s ease;
      width: 100%;
      text-align: left;
    }

    .sidebar .dropdown .btn:hover {
      background: #f1f1f1;
      transform: translateY(-2px);
    }

    .sidebar .dropdown-menu {
      border-radius: 12px;
      border: none;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
      animation: fadeIn .3s ease;
      width: 100%;
      z-index: 1000;
    }

    .sidebar .dropdown-item {
      font-weight: 500;
      padding: 10px 20px;
      transition: all .2s ease;
    }

    .sidebar .dropdown-item:hover {
      background-color: #fda085;
      color: #fff;
      border-radius: 8px;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* =======================
       ‚òÖ ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏° (‡πÄ‡∏î‡∏¥‡∏°)
       ======================= */
    .darklight {
      margin-left: auto;
      padding: 6px 12px;
      border-radius: 20px;
      background: #f1f5f9;
      color: #0f172a;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      user-select: none;
      transition: .2s;
      border: 1px solid #e2e8f0;
    }

    .darklight:hover {
      background: #e2e8f0
    }

    .theme-dark {
      --bg: #0b1220;
      --panel: #0f172a;
      --ink: #e5e7eb;
      --muted: #94a3b8;
      --brand: #3f6212;
      --accent: #84cc16;
      --accent-dark: #65a30d;
      --sidebar: #0f172a;
      --sidebar-border: #334155;
    }

    .theme-dark .content,
    .theme-dark .sidebar,
    .theme-dark .topbar {
      border-color: var(--sidebar-border);
      box-shadow: 0 2px 10px rgba(0, 0, 0, .4);
    }

    .theme-dark #gAir .ring {
      --progress: #f87171
    }

    .theme-dark #gRH .ring {
      --progress: #34d399
    }

    .theme-dark #gCO2 .ring {
      --progress: #fb923c
    }

    /* =======================
   Control Nutrients layout + mini donut gauges
   ======================= */
    .control-nutrients {
      padding: 16px;
    }

    .cn-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }

    .cn-card {
      background: var(--panel);
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      padding: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, .05);
    }

    .cn-card .cn-title {
      background: #dcfce7;
      border-radius: 6px;
      font-weight: 700;
      padding: 6px 10px;
      margin-bottom: 10px;
    }

    .cn-gauges {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      align-items: center;
    }

    .mini-gauge {
      --p: 0;
      --progress: #ef4444;
      --bg: #e5e7eb;
      width: 110px;
      aspect-ratio: 1/1;
      display: grid;
      place-items: center;
      position: relative;
      margin: 0 auto;
    }

    .mini-gauge .ring {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background:
        conic-gradient(var(--progress) calc(var(--p)*1%), #ddd 0) content-box,
        conic-gradient(#f3f4f6 0 100%);
      -webkit-mask:
        radial-gradient(farthest-side, #0000 64%, #000 65%);
      mask:
        radial-gradient(farthest-side, #0000 64%, #000 65%);
    }

    .mini-gauge .center {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      pointer-events: none;
    }

    .mini-gauge .v {
      display: grid;
      gap: 2px;
      place-items: center;
      font-size: 13px;
    }

    .mini-gauge .num {
      font-weight: 700;
      font-size: 18px;
    }

    .mini-gauge .label {
      color: var(--muted);
      font-size: 12px;
    }

    /* Reservoir level bar */
    .cn-level {
      display: grid;
      grid-template-columns: 1fr;
      gap: 6px;
      margin: 28px 2px 8px;
      font-size: 12px;
    }

    .levelbar {
      height: 10px;
      background: #e5e7eb;
      border-radius: 20px;
      position: relative;
      overflow: hidden;
    }

    .levelbar .bar {
      height: 100%;
      width: var(--w, 50%);
      background: linear-gradient(90deg, #1d4ed8, #0ea5e9);
    }

    /* Device rows */
    .device-list {
      display: grid;
      gap: 10px;
    }

    .device-row {
      display: grid;
      grid-template-columns: 28px 1fr auto auto;
      align-items: center;
      gap: 10px;
    }

    .device-row .ico {
      width: 28px;
      height: 28px;
      object-fit: contain;
    }

    .pill {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 999px;
      font-weight: 700;
      font-size: 12px;
      background: #d9f99d;
      /* AUTO */
    }

    .pill.off {
      background: #1f2937;
      color: #fff;
    }

    .switch-wrap {
      display: flex;
      align-items: center;
      gap: 8px;
      min-width: 90px;
      justify-content: flex-end;
    }

    .switch-wrap .lbl {
      font-size: 12px;
      color: var(--muted);
    }

    /* Responsive */
    @media (max-width: 1440px) {
      .cn-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    @media (max-width: 980px) {
      .cn-grid {
        grid-template-columns: 1fr;
      }

      .cn-gauges {
        grid-template-columns: repeat(3, minmax(90px, 1fr));
      }

      .mini-gauge {
        width: 100px;
      }
    }

    /* ===== SSB-box3: mini-gauge visual upgrade (icons inside donut, bottom value, status colors) ===== */
    .panel .mini-card {
      background: #fff;
      border: 1px solid #eef2f7;
      border-radius: 14px;
      padding: 14px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, .06);
    }

    .mini-gauges {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px
    }

    .mini-gauge {
      width: 150px;
      margin-inline: auto;
      position: relative margin-bottom 32px;
    }

    .mini-gauge .ring {
      --size: 120px;
      --track: #e5e7eb;
      --progress: #6ee7b7;
      --p: 0;
      width: var(--size);
      height: var(--size);
      border-radius: 50%;
      margin: auto;
      position: relative;
      display: grid;
      place-items: center;
      background:
        radial-gradient(#fff calc(50% - 11px), transparent calc(50% - 10px)),
        conic-gradient(var(--progress) calc(var(--p)*1%), var(--track) 0);
      box-shadow: 0 6px 16px rgba(0, 0, 0, .08), inset 0 0 0 1px #f1f5f9;
    }

    /* center (work with existing <img> or text badge) */
    .mini-gauge .center {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      pointer-events: none
    }

    .mini-gauge .ico {
      width: 42px;
      height: 42px;
      object-fit: contain;
      border-radius: 12px;
      background: #fff;
      box-shadow: inset 0 0 0 1px #f1f5f9, 0 2px 6px rgba(0, 0, 0, .06);
    }

    .mini-gauge .badge {
      width: 54px;
      height: 54px;
      border-radius: 999px;
      display: grid;
      place-items: center;
      font-weight: 800;
      background: #fff;
      box-shadow: inset 0 0 0 1px #e5e7eb;
    }

    .mini-gauge .v {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 28px;
      display: grid;
      place-items: center;
      gap: 2px;
      font-size: 16px;
      font-weight: 500;
      line-height: 1
    }

    .mini-gauge .num {
      font-size: 18px;
      font-weight: 800
    }

    .mini-gauge .unit {
      font-size: 12px;
      opacity: .8;
      margin-left: 2px
    }

    .mini-gauge .label {
      position: absolute;
      left: 50%;
      bottom: -46px;
      transform: translateX(-50%);
      background: none;
      border: none;
      box-shadow: none;
      padding: 0;
      color: #111;
      font-weight: 500;
      font-size: 13px;
      text-align: center;
      line-height: 1.1;
      white-space: normal
    }

    /* status colors */
    .mini-gauge.ok .ring {
      --progress: #34d399
    }

    .mini-gauge.norm .ring {
      --progress: #22d3ee
    }

    .mini-gauge.bad .ring {
      --progress: #fb7185
    }

    /* === FIX: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏Ç‡∏≠‡∏á .ctrl-row ‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£ === */
    :root {
      --ctrl-icon: 40px;
      /* ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ */
      --ctrl-pill: 100px;
      /* ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÅ‡∏ó‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (AUTO/OFF) */
      --ctrl-switch: 130px;
      /* ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î */
      --ctrl-row-h: 36px;
      /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÅ‡∏ñ‡∏ß */
    }

    /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ô‡∏¥‡πà‡∏á‡∏ï‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
    .ctrl-row {
      display: grid;
      grid-template-columns: var(--ctrl-icon) 1fr var(--ctrl-pill) var(--ctrl-switch);
      gap: 14px;
      align-items: center;
      margin: 6px;
      min-height: var(--ctrl-row-h);
    }

    /* ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î (‡∏Å‡∏±‡∏ô‡πÇ‡∏î‡∏ô‡∏Å‡∏é‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏±‡∏ö) */
    .ctrl-row .icon-sm {
      width: var(--ctrl-icon);
      height: var(--ctrl-icon);
      object-fit: contain;
      padding: 4px;
    }

    /* pill = ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏û‡∏≠‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏Ç‡∏≠‡∏á‡∏°‡∏±‡∏ô (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á mx-3 / w-auto) */
    .ctrl-row .pill {
      width: 100%;
      height: 30px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 6px 10px;
      margin: 0 !important;
      /* ‡∏Å‡∏±‡∏ô Bootstrap ‡∏î‡∏±‡∏ô */
      box-sizing: border-box;
    }

    /* ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå ‡∏à‡∏±‡∏î‡∏ä‡∏¥‡∏î‡∏Ç‡∏ß‡∏≤‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏¢‡∏∑‡∏î */
    .ctrl-row .switch-inline {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 10px;
      width: 100%;
      white-space: nowrap;
    }

    /* ‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÅ‡∏ñ‡∏ß */
    .switch-lg.form-check-input {
      width: 3.4rem;
      height: 1.4rem
    }



    /* =========================================================
 üÉè CARD + HEADERS
========================================================= */
    .cc-card {
      background: #fff;
      border: 1px solid var(--ring-bg);
      border-radius: 10px;
      padding: 5px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, .05);
      font-size: 13px
    }

    .cc-card .h {
      background: #cfe2ff;
      border-radius: 3px;
      display: flex;
      align-items: center;
      min-height: 36px;
      padding: 6px 8px
    }

    .cc-card .head {
      display: grid;
      grid-template-columns: 40px 1fr;
      gap: 40px;
      align-items: center
    }

    .cc-card .row1 {
      display: flex;
      justify-content: space-between;
      align-items: center;
      white-space: nowrap;
      margin: 6px 0;
      background: #f0f7f9;
      border-radius: 6px;
      padding: 5px
    }

    .divider {
      border-top: 1px dashed var(--ring-bg);
      margin: 2px 0 2px
    }

    /* ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ */
    .icon-sm {
      width: 30px;
      height: 30px;
      object-fit: contain;
      padding: 4px;
      display: block
    }

    /* === Full-width & no horizontal scroll ===================== */
    html,
    body {
      width: 100%;
      height: 100%;
      overflow-x: hidden;
    }

    .app {
      width: 100%;
      max-width: 100vw;
      /* ‡∏´‡πâ‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
      overflow-x: hidden;
    }

    /* ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå‡∏¢‡∏∏‡∏ö‡∏ï‡∏±‡∏ß‡πÑ‡∏î‡πâ ‡πÑ‡∏°‡πà‡∏î‡∏±‡∏ô‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô */
    .content,
    .content-inner,
    .tabs,
    .cn-grid,
    .cn-card,
    .device-list {
      min-width: 0;
    }

    /* tabs ‡πÉ‡∏´‡πâ‡∏Å‡∏¥‡∏ô‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏û‡∏≠‡∏î‡∏µ‡∏à‡∏≠ */
    .tabs {
      width: 100%;
      box-sizing: border-box;
    }

    /* ‡∏Å‡∏±‡∏ô element ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏î‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡∏Ç‡∏ß‡∏≤ */
    .cn-card {
      overflow: hidden;
    }

    /* ‡∏£‡∏π‡∏õ/‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏£‡∏¥‡∏î */
    img,
    svg {
      max-width: 100%;
      height: auto;
    }

    /* ‡∏õ‡∏£‡∏±‡∏ö margin ‡∏Ç‡∏≠‡∏á content ‡πÉ‡∏´‡πâ‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô (‡∏≠‡∏¢‡∏≤‡∏Å‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏™‡∏∏‡∏î‡∏Å‡πá‡πÉ‡∏ä‡πâ 0) */
    .content {
      margin: 8px;
    }

    /* ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡πá‡∏°‡∏™‡∏∏‡∏î‡πÜ ‡πÉ‡∏ä‡πâ margin:0; */

    /* ‡∏õ‡∏∏‡πà‡∏°/‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ö‡∏≤‡∏ô */
    .ctrl-row .switch-inline {
      max-width: 100%;
      flex-wrap: nowrap;
    }

    /* ===== end upgrade ===== */
  </style>
</head>

<body>
  <div class="app">
    <!-- =======================
         Topbar
         ======================= -->
    <header class="topbar">
      <div class="topbar-inner">
        <div class="brand-badge">
          <img
            src="https://github.com/reungwitk-cyber/ssb-box/raw/c958231f7e20c74bff3076384c1e46bbee9eec24/Logosbb-box.png"
            alt="SABIENG BOX Logo" class="brand-logo">
          <div class="brand-text"></div>
        </div>
        <div class="title">LAB BOX</div>

        <!-- ‡∏õ‡∏∏‡πà‡∏° + ‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏ß‡∏≤ -->
        <div class="topbar-right">

          <div class="dropdown" id="modeDropdown">
            <button class="btn dropdown-toggle px-5 py-0" type="button" data-bs-toggle="dropdown">
              MODE
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#" data-val="1">AUTO</a></li>
              <li><a class="dropdown-item" href="#" data-val="0">MANUAL</a></li>
              <li><a class="dropdown-item" href="#" data-val="2">TASK</a></li>
            </ul>
          </div>






          <button class="darklight">darklight</button>
          <div class="clock">
            <div class="date" id="dateText">Mon. 12 - 09 - 25</div>
            <div class="time" id="timeText">Time - 17:12:35</div>
          </div>
        </div>
      </div>
    </header>

    <!-- =======================
         Sidebar
         ======================= -->
    <aside class="sidebar">
      <div class="menu" style="padding-top:10px">
        <button class="menu-btn active">
          <span class="ico"><img
              src="https://github.com/reungwitk-cyber/ssb-box/raw/c958231f7e20c74bff3076384c1e46bbee9eec24/homesw1.png"
              alt="Home"></span>
          <span>Sabieng HQ</span>
        </button>
      </div>

      <!-- Dropdown ‡∏™‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ -->
      <div class="side-section">
        <div class="dropdown">
          <button class="btn dropdown-toggle px-4 py-2" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            ‚öôÔ∏è LAB BOX
          </button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="lab.html">LAB BOX</a></li>
            <li><a class="dropdown-item" href="single.html">SINGLE</a></li>
            <li><a class="dropdown-item" href="double.html">DOUBLE</a></li>
          </ul>
        </div>
      </div>

      <div class="menu">
        <button class="menu-btn"><span class="ico"><img
              src="https://github.com/reungwitk-cyber/ssb-box/raw/695cd88b6d596bfbd2b4bb6e83b47e81ab779a1f/RecipeSw.png"
              alt="Recipes"></span><span>Recipes</span></button>
        <button class="menu-btn"><span class="ico"><img
              src="https://github.com/reungwitk-cyber/ssb-box/raw/cf3649fc297bab4602cac39e05810940d42b774f/Crop%20yield.png"
              alt="Crop scheduling"></span><span>Crop scheduling</span></button>
        <button class="menu-btn"><span class="ico"><img
              src="https://github.com/reungwitk-cyber/ssb-box/raw/cf3649fc297bab4602cac39e05810940d42b774f/Crop%20scheduling.png"
              alt="Crop yield"></span><span>Crop yield</span></button>
        <button class="menu-btn"><span class="ico"><img
              src="https://github.com/reungwitk-cyber/ssb-box/raw/cf3649fc297bab4602cac39e05810940d42b774f/Energy%20Management.png"
              alt="Energy"></span><span>Energy Management</span></button>
        <button class="menu-btn"><span class="ico"><img
              src="https://github.com/reungwitk-cyber/ssb-box/raw/cf3649fc297bab4602cac39e05810940d42b774f/SettingSw1.png"
              alt="Settings"></span><span>Setting</span></button>
        <button class="menu-btn"><span class="ico"><img
              src="https://github.com/reungwitk-cyber/ssb-box/raw/cf3649fc297bab4602cac39e05810940d42b774f/Help.png"
              alt="Help"></span><span>Help</span></button>
      </div>
    </aside>

    <!-- =======================
         Content
         ======================= -->
    <main class="content">
      <div class="content-inner">
        <!-- Tabs -->
        <nav class="tabs">
          <div class="tab" data-href="DashboardLab1.html">Dashboard</div>
          <div class="tab" data-href="ControlClimateLab1.html">Control Climate</div>
          <div class="tab active">Control Nutrients</div>
          <div class="tab">Recipe</div>
          <div class="tab">Notification</div>
          <div class="tab">Analysis</div>
        </nav>





        <section class="control-nutrients">
          <div class="cn-grid">

            <!-- ===== Column 1: Nursery Reservoir ===== -->
            <div class="cn-card">
              <div class="cn-title">Nursery Reservoir</div>
              <div class="cn-gauges">
                <!-- Temp -->
                <div class="mini-gauge" id="nur-temp-mini" data-min="0" data-max="50" data-precision="1"
                  data-c1="#3b82f6" data-c2="#10b981" data-c3="#ef4444">
                  <div class="ring"></div>
                  <div class="center">
                    <img class="ico"
                      src="https://github.com/reungwitk-cyber/ssb-box/raw/e597fa05d3810a7619766e0f5b2e45ff252c6a9f/tempsensor.svg"
                      alt="Temperature">
                    <div class="v">
                      <span class="num">0.0</span>
                      <span class="label">Nutrient Temp (¬∞C)</span>
                    </div>
                  </div>
                </div>
                <!-- EC -->
                <div class="mini-gauge" id="nur-ec-mini" data-min="0" data-max="3" data-precision="2" data-c1="#f59e0b"
                  data-c2="#10b981" data-c3="#ef4444">
                  <div class="ring"></div>
                  <div class="center">
                    <img class="ico"
                      src="https://github.com/reungwitk-cyber/ssb-box/raw/854f285d82f0a1fc22e93123da994c5bb25fcbb8/sensor%20EC.svg"
                      alt="EC">
                    <div class="v">
                      <span class="num">0.00</span>
                      <span class="label">EC (mS/cm)</span>
                    </div>
                  </div>
                </div>
                <!-- pH -->
                <div class="mini-gauge" id="nur-ph-mini" data-min="4" data-max="8" data-precision="1" data-c1="#ef4444"
                  data-c2="#10b981" data-c3="#ef4444">
                  <div class="ring"></div>
                  <div class="center">
                    <img class="ico"
                      src="https://github.com/reungwitk-cyber/ssb-box/raw/854f285d82f0a1fc22e93123da994c5bb25fcbb8/PH%20sensor.svg"
                      alt="pH">
                    <div class="v">
                      <span class="num">0.0</span>
                      <span class="label">pH</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="cn-level">
                <div>üíß Reservoir Level</div>
                <div class="levelbar">
                  <div class="bar" style="--w: 70%"></div>
                </div>
              </div>

              <div class="cc-card">
                <!-- Example device rows (icons are placeholders, user will replace src later) -->
                <!-- Nursery Reservoir ¬∑ Nutrient A Dosing -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/59350b2a117088d2d37c4a48e321f7710cf73885/kmeA0.png"
                    alt="nursery-dosing-a" data-state-alias="nursery-dosing-a"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/59350b2a117088d2d37c4a48e321f7710cf73885/kmeA1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/59350b2a117088d2d37c4a48e321f7710cf73885/kmeA0.png">

                  <span>Nutrient A Dosing</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto" id="pill-nursery-dosing-a"
                    data-alias="nursery-dosing-a" data-mode-topic="ssb-box/mode/nursery-dosing-a/state"
                    data-cmd-topic="ssb-box/switch/nursery-dosing-aof/cmd"
                    data-switch-state-topic="ssb-box/switch/nursery-dosing-aof/state" data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline" style="--switch-gap: 10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="nursery-dosing-a"
                        data-alias="nursery-dosing-a">
                    </div>
                    <label class="form-check-label mb-0" for="nursery-dosing-a">On/Off</label>
                  </div>
                </div>



                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/1581b30ba4ea52cde157bb1aa851868fc5ba4d28/kmeB0.png"
                    alt="nursery-dosing-b" data-state-alias="nursery-dosing-b"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/1581b30ba4ea52cde157bb1aa851868fc5ba4d28/KmeB1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/1581b30ba4ea52cde157bb1aa851868fc5ba4d28/kmeB0.png">
                  <span>Nutrient B Dosing</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto" id="pill-nursery-dosing-b"
                    data-alias="nursery-dosing-b" data-mode-topic="ssb-box/mode/nursery-dosing-b/state"
                    data-cmd-topic="ssb-box/switch/nursery-dosing-bof/cmd"
                    data-switch-state-topic="ssb-box/switch/nursery-dosing-b/state" data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline" style="--switch-gap: 10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="nursery-dosing-b"
                        data-alias="nursery-dosing-b">
                    </div>
                    <label class="form-check-label mb-0" for="nursery-dosing-b">On/Off</label>
                  </div>
                </div>


                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs0.png"
                    alt="nursery-dosing-up" data-state-alias="nursery-dosing-up"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs0.png">
                  <span>pH Dosing Up</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto" id="pill-nursery-dosing-up"
                    data-alias="nursery-dosing-up" data-mode-topic="ssb-box/mode/nursery-dosing-up/state"
                    data-cmd-topic="ssb-box/switch/nursery-dosing-upof/cmd"
                    data-switch-state-topic="ssb-box/switch/nursery-dosing-up/state" data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline" style="--switch-gap: 10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="nursery-dosing-up"
                        data-alias="nursery-dosing-up">
                    </div>
                    <label class="form-check-label mb-0" for="nursery-dosing-up">On/Off</label>
                  </div>
                </div>


                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs0.png"
                    alt="nursery-dosing-down" data-state-alias="nursery-dosing-down"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs0.png">
                  <span>pH Dosing Down</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto"
                    id="pill-nursery-dosing-down" data-alias="nursery-dosing-down"
                    data-mode-topic="ssb-box/mode/nursery-dosing-down/state"
                    data-cmd-topic="ssb-box/switch/nursery-dosing-downof/cmd"
                    data-switch-state-topic="ssb-box/switch/nursery-dosing-down/state" data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline" style="--switch-gap: 10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="nursery-dosing-down"
                        data-alias="nursery-dosing-down">
                    </div>
                    <label class="form-check-label mb-0" for="nursery-dosing-down">On/Off</label>
                  </div>
                </div>

                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/47bb76d7e2611176d5c604f358fe313e2745cbe8/Sending%20S0.png"
                    alt="nursery-pump-upper" data-state-alias="nursery-pump-upper"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/47bb76d7e2611176d5c604f358fe313e2745cbe8/Sending%20S1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/47bb76d7e2611176d5c604f358fe313e2745cbe8/Sending%20S0.png">
                  <span>Sending Pump Upper</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto" id="pill-nursery-pump-upper"
                    data-alias="nursery-pump-upper" data-mode-topic="ssb-box/mode/nursery-pump-upper/state"
                    data-cmd-topic="ssb-box/switch/nursery-pump-upperof/cmd"
                    data-switch-state-topic="ssb-box/switch/nursery-pump-upper/state" data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline" style="--switch-gap: 10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="nursery-pump-upper"
                        data-alias="nursery-pump-upper">
                    </div>
                    <label class="form-check-label mb-0" for="nursery-pump-upper">On/Off</label>
                  </div>
                </div>



                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/47bb76d7e2611176d5c604f358fe313e2745cbe8/Sending%20S0.png"
                    alt="nursery-pump-lower" data-state-alias="nursery-pump-lower"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/47bb76d7e2611176d5c604f358fe313e2745cbe8/Sending%20S1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/47bb76d7e2611176d5c604f358fe313e2745cbe8/Sending%20S0.png">
                  <span>Sending Pump Lower</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto" id="pill-nursery-pump-lower"
                    data-alias="nursery-pump-lower" data-mode-topic="ssb-box/mode/nursery-pump-lower/state"
                    data-cmd-topic="ssb-box/switch/nursery-pump-lowerof/cmd"
                    data-switch-state-topic="ssb-box/switch/nursery-pump-lower/state" data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline" style="--switch-gap: 10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="nursery-pump-lower"
                        data-alias="nursery-pump-lower">
                    </div>
                    <label class="form-check-label mb-0" for="nursery-pump-lower">On/Off</label>
                  </div>
                </div>

                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/acd076a518151485a9c50fd06dc151ca73be58a0/RO%20REfillS0.png"
                    alt="nursery-ro-pump" data-state-alias="nursery-ro-pump"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/acd076a518151485a9c50fd06dc151ca73be58a0/RO%20REfillS1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/acd076a518151485a9c50fd06dc151ca73be58a0/RO%20REfillS0.png">
                  <span>RO Refill Pump</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto" id="pill-nursery-ro-pump"
                    data-alias="nursery-ro-pump" data-mode-topic="ssb-box/mode/nursery-ro-pump/state"
                    data-cmd-topic="ssb-box/switch/nursery-ro-pumpof/cmd"
                    data-switch-state-topic="ssb-box/switch/nursery-ro-pump/state" data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline" style="--switch-gap: 10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="nursery-ro-pump"
                        data-alias="nursery-ro-pump">
                    </div>
                    <label class="form-check-label mb-0" for="nursery-ro-pump">On/Off</label>
                  </div>
                </div>

                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/ffbc97b04ef269aecf7eed9ea94de0ed4ccef679/CirulationS0.png"
                    alt="nursery-circulation-pump" data-state-alias="nursery-circulation-pump"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/ffbc97b04ef269aecf7eed9ea94de0ed4ccef679/CirulationS1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/ffbc97b04ef269aecf7eed9ea94de0ed4ccef679/CirulationS0.png">
                  <span>Circulation Pump</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto"
                    id="pill-nursery-circulation-pump" data-alias="nursery-circulation-pump"
                    data-mode-topic="ssb-box/mode/nursery-circulation-pump/state"
                    data-cmd-topic="ssb-box/switch/nursery-circulation-pumpof/cmd"
                    data-switch-state-topic="ssb-box/switch/nursery-circulation-pump/state" data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline" style="--switch-gap: 10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox"
                        id="nursery-circulation-pump" data-alias="nursery-circulation-pump">
                    </div>
                    <label class="form-check-label mb-0" for="nursery-circulation-pump">On/Off</label>
                  </div>
                </div>

              </div>
            </div>

            <!-- ===== Column 2: Main Reservoir 1 ===== -->
            <div class="cn-card">
              <div class="cn-title">Main Reservoir 1</div>

              <div class="cn-gauges">
                <!-- Temp -->
                <div class="mini-gauge" id="r1-temp-mini" data-min="0" data-max="50" data-precision="1"
                  data-c1="#3b82f6" data-c2="#10b981" data-c3="#ef4444">
                  <div class="ring"></div>
                  <div class="center">
                    <img class="ico"
                      src="https://github.com/reungwitk-cyber/ssb-box/raw/e597fa05d3810a7619766e0f5b2e45ff252c6a9f/tempsensor.svg"
                      alt="Temperature">
                    <div class="v">
                      <span class="num">0.0</span>
                      <span class="label">Nutrient Temp (¬∞C)</span>
                    </div>
                  </div>
                </div>
                <!-- EC -->
                <div class="mini-gauge" id="r1-ec-mini" data-min="0" data-max="3" data-precision="2" data-c1="#f59e0b"
                  data-c2="#10b981" data-c3="#ef4444">
                  <div class="ring"></div>
                  <div class="center">
                    <img class="ico"
                      src="https://github.com/reungwitk-cyber/ssb-box/raw/854f285d82f0a1fc22e93123da994c5bb25fcbb8/sensor%20EC.svg"
                      alt="EC">
                    <div class="v">
                      <span class="num">0.00</span>
                      <span class="label">EC (mS/cm)</span>
                    </div>
                  </div>
                </div>
                <!-- pH -->
                <div class="mini-gauge" id="r1-ph-mini" data-min="4" data-max="8" data-precision="1" data-c1="#ef4444"
                  data-c2="#10b981" data-c3="#ef4444">
                  <div class="ring"></div>
                  <div class="center">
                    <img class="ico"
                      src="https://github.com/reungwitk-cyber/ssb-box/raw/854f285d82f0a1fc22e93123da994c5bb25fcbb8/PH%20sensor.svg"
                      alt="pH">
                    <div class="v">
                      <span class="num">0.0</span>
                      <span class="label">pH</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="cn-level">
                <div>ü©∏ Reservoir Level</div>
                <div class="levelbar">
                  <div class="bar" style="--w: 40%; background:linear-gradient(90deg,#ef4444,#f87171)"></div>
                </div>
              </div>

              <!-- Devices (same structure as Nursery) -->
              <div class="cc-card">
                <!-- Nutrient A -->
                <!-- main1: Nutrient A Dosing -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/59350b2a117088d2d37c4a48e321f7710cf73885/kmeA0.png"
                    alt="main1-dosing-a" data-state-alias="main1-dosing-a"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/59350b2a117088d2d37c4a48e321f7710cf73885/kmeA1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/59350b2a117088d2d37c4a48e321f7710cf73885/kmeA0.png">
                  <span>Nutrient A Dosing</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto" id="pill-main1-dosing-a"
                    data-alias="main1-dosing-a" data-mode-topic="ssb-box/mode/main1-dosing-a/state"
                    data-cmd-topic="ssb-box/switch/main1-dosing-aof/cmd"
                    data-switch-state-topic="ssb-box/switch/main1-dosing-a/state" data-off-code="3"><span
                      data-label>Off</span></div>

                  <div class="switch-inline" style="--switch-gap:10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="main1-dosing-a"
                        data-alias="main1-dosing-a">
                    </div>
                    <label class="form-check-label mb-0" for="main1-dosing-a">On/Off</label>
                  </div>
                </div>

                <!-- main1: Nutrient B Dosing -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/1581b30ba4ea52cde157bb1aa851868fc5ba4d28/kmeB0.png"
                    alt="main1-dosing-b" data-state-alias="main1-dosing-b"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/1581b30ba4ea52cde157bb1aa851868fc5ba4d28/KmeB1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/1581b30ba4ea52cde157bb1aa851868fc5ba4d28/kmeB0.png">
                  <span>Nutrient B Dosing</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto" id="pill-main1-dosing-b"
                    data-alias="main1-dosing-b" data-mode-topic="ssb-box/mode/main1-dosing-b/state"
                    data-cmd-topic="ssb-box/switch/main1-dosing-bof/cmd"
                    data-switch-state-topic="ssb-box/switch/main1-dosing-b/state" data-off-code="3"><span
                      data-label>Off</span></div>

                  <div class="switch-inline" style="--switch-gap:10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="main1-dosing-b"
                        data-alias="main1-dosing-b">
                    </div>
                    <label class="form-check-label mb-0" for="main1-dosing-b">On/Off</label>
                  </div>
                </div>

                <!-- main1: pH Dosing Up -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs0.png"
                    alt="main1-dosing-up" data-state-alias="main1-dosing-up"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/blob/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs1.png?raw=1"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs0.png">
                  <span>pH Dosing Up</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto" id="pill-main1-dosing-up"
                    data-alias="main1-dosing-up" data-mode-topic="ssb-box/mode/main1-dosing-up/state"
                    data-cmd-topic="ssb-box/switch/main1-dosing-upof/cmd"
                    data-switch-state-topic="ssb-box/switch/main1-dosing-up/state" data-off-code="3"><span
                      data-label>Off</span></div>

                  <div class="switch-inline" style="--switch-gap:10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="main1-dosing-up"
                        data-alias="main1-dosing-up">
                    </div>
                    <label class="form-check-label mb-0" for="main1-dosing-up">On/Off</label>
                  </div>
                </div>

                <!-- main1: pH Dosing Down -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs0.png"
                    alt="main1-dosing-down" data-state-alias="main1-dosing-down"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/blob/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs1.png?raw=1"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs0.png">
                  <span>pH Dosing Down</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto" id="pill-main1-dosing-down"
                    data-alias="main1-dosing-down" data-mode-topic="ssb-box/mode/main1-dosing-down/state"
                    data-cmd-topic="ssb-box/switch/main1-dosing-downof/cmd"
                    data-switch-state-topic="ssb-box/switch/main1-dosing-down/state" data-off-code="3"><span
                      data-label>Off</span></div>

                  <div class="switch-inline" style="--switch-gap:10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="main1-dosing-down"
                        data-alias="main1-dosing-down">
                    </div>
                    <label class="form-check-label mb-0" for="main1-dosing-down">On/Off</label>
                  </div>
                </div>

                <!-- main1: Pump Drop (Irrigation/Sending) -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/47bb76d7e2611176d5c604f358fe313e2745cbe8/Sending%20S0.png"
                    alt="main1-pumpdrop" data-state-alias="main1-pumpdrop"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/47bb76d7e2611176d5c604f358fe313e2745cbe8/Sending%20S1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/47bb76d7e2611176d5c604f358fe313e2745cbe8/Sending%20S0.png">
                  <span>Pump Drop</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto" id="pill-main1-pumpdrop"
                    data-alias="main1-pumpdrop" data-mode-topic="ssb-box/mode/main1-pumpdrop/state"
                    data-cmd-topic="ssb-box/switch/main1-pumpdropof/cmd"
                    data-switch-state-topic="ssb-box/switch/main1-pumpdrop/state" data-off-code="3"><span
                      data-label>Off</span></div>

                  <div class="switch-inline" style="--switch-gap:10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="main1-pumpdrop"
                        data-alias="main1-pumpdrop">
                    </div>
                    <label class="form-check-label mb-0" for="main1-pumpdrop">On/Off</label>
                  </div>
                </div>

                <!-- main1: RO Refill Pump -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/acd076a518151485a9c50fd06dc151ca73be58a0/RO%20REfillS0.png"
                    alt="main1-ro-pump" data-state-alias="main1-ro-pump"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/acd076a518151485a9c50fd06dc151ca73be58a0/RO%20REfillS1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/acd076a518151485a9c50fd06dc151ca73be58a0/RO%20REfillS0.png">
                  <span>RO Refill Pump</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto" id="pill-main1-ro-pump"
                    data-alias="main1-ro-pump" data-mode-topic="ssb-box/mode/main1-ro-pump/state"
                    data-cmd-topic="ssb-box/switch/main1-ro-pumpof/cmd"
                    data-switch-state-topic="ssb-box/switch/main1-ro-pump/state" data-off-code="3"><span
                      data-label>Off</span></div>

                  <div class="switch-inline" style="--switch-gap:10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="main1-ro-pump"
                        data-alias="main1-ro-pump">
                    </div>
                    <label class="form-check-label mb-0" for="main1-ro-pump">On/Off</label>
                  </div>
                </div>

                <!-- main1: Circulation Pump -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/ffbc97b04ef269aecf7eed9ea94de0ed4ccef679/CirulationS0.png"
                    alt="main1-circulation-pump" data-state-alias="main1-circulation-pump"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/ffbc97b04ef269aecf7eed9ea94de0ed4ccef679/CirulationS1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/ffbc97b04ef269aecf7eed9ea94de0ed4ccef679/CirulationS0.png">
                  <span>Circulation Pump</span>

                  <div class="pill off text-center py-2 mx-3 rounded-pill shadow-sm w-auto"
                    id="pill-main1-circulation-pump" data-alias="main1-circulation-pump"
                    data-mode-topic="ssb-box/mode/main1-circulation-pump/state"
                    data-cmd-topic="ssb-box/switch/main1-circulation-pumpof/cmd"
                    data-switch-state-topic="ssb-box/switch/main1-circulation-pump/state" data-off-code="3"><span
                      data-label>Off</span></div>

                  <div class="switch-inline" style="--switch-gap:10px;">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox"
                        id="main1-circulation-pump" data-alias="main1-circulation-pump">
                    </div>
                    <label class="form-check-label mb-0" for="main1-circulation-pump">On/Off</label>
                  </div>
                </div>
              </div>
            </div>

            <!-- ===== Column 3: Main Reservoir 2 ===== -->
            <div class="cn-card">
              <div class="cn-title">Main Reservoir 2</div>

              <div class="cn-gauges">
                <!-- Temp -->
                <div class="mini-gauge" id="r2-temp-mini" data-min="0" data-max="50" data-precision="1"
                  data-c1="#3b82f6" data-c2="#10b981" data-c3="#ef4444">
                  <div class="ring"></div>
                  <div class="center">
                    <img class="ico"
                      src="https://github.com/reungwitk-cyber/ssb-box/raw/e597fa05d3810a7619766e0f5b2e45ff252c6a9f/tempsensor.svg"
                      alt="Temperature">
                    <div class="v">
                      <span class="num">0.0</span>
                      <span class="label">Nutrient Temp (¬∞C)</span>
                    </div>
                  </div>
                </div>
                <!-- EC -->
                <div class="mini-gauge" id="r2-ec-mini" data-min="0" data-max="3" data-precision="2" data-c1="#f59e0b"
                  data-c2="#10b981" data-c3="#ef4444">
                  <div class="ring"></div>
                  <div class="center">
                    <img class="ico"
                      src="https://github.com/reungwitk-cyber/ssb-box/raw/854f285d82f0a1fc22e93123da994c5bb25fcbb8/sensor%20EC.svg"
                      alt="EC">
                    <div class="v">
                      <span class="num">0.00</span>
                      <span class="label">EC (mS/cm)</span>
                    </div>
                  </div>
                </div>
                <!-- pH -->
                <div class="mini-gauge" id="r2-ph-mini" data-min="4" data-max="8" data-precision="1" data-c1="#ef4444"
                  data-c2="#10b981" data-c3="#ef4444">
                  <div class="ring"></div>
                  <div class="center">
                    <img class="ico"
                      src="https://github.com/reungwitk-cyber/ssb-box/raw/854f285d82f0a1fc22e93123da994c5bb25fcbb8/PH%20sensor.svg"
                      alt="pH">
                    <div class="v">
                      <span class="num">0.0</span>
                      <span class="label">pH</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="cn-level">
                <div>üíß Reservoir Level</div>
                <div class="levelbar">
                  <div class="bar" style="--w: 70%"></div>
                </div>
              </div>

              <!-- Devices (same structure as Nursery) -->
              <div class="cc-card">
                <!-- Nutrient A -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/59350b2a117088d2d37c4a48e321f7710cf73885/kmeA0.png"
                    alt="A" data-state-alias="r2A"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/59350b2a117088d2d37c4a48e321f7710cf73885/kmeA1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/59350b2a117088d2d37c4a48e321f7710cf73885/kmeA0.png">
                  <span>Nutrient A Dosing</span>

                  <div class="pill off" id="pill-r2A" data-alias="r2A" data-mode-topic="ssb-box/mode/r2A/state"
                    data-cmd-topic="ssb-box/switch/r2A/cmd" data-switch-state-topic="ssb-box/switch/r2A/state"
                    data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="r2A" data-alias="r2A">
                    </div>
                    <label class="form-check-label mb-0">On/Off</label>
                  </div>
                </div>

                <!-- Nutrient B -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/1581b30ba4ea52cde157bb1aa851868fc5ba4d28/kmeB0.png"
                    alt="B" data-state-alias="r2B"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/1581b30ba4ea52cde157bb1aa851868fc5ba4d28/KmeB1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/1581b30ba4ea52cde157bb1aa851868fc5ba4d28/kmeB0.png">
                  <span>Nutrient B Dosing</span>

                  <div class="pill off" id="pill-r2B" data-alias="r2B" data-mode-topic="ssb-box/mode/r2B/state"
                    data-cmd-topic="ssb-box/switch/r2B/cmd" data-switch-state-topic="ssb-box/switch/r2B/state"
                    data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="r2B" data-alias="r2B">
                    </div>
                    <label class="form-check-label mb-0">On/Off</label>
                  </div>
                </div>

                <!-- pH Up -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs0.png"
                    alt="pH Up" data-state-alias="r2PhUp"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs0.png">
                  <span>pH Dosing Up</span>

                  <div class="pill off" id="pill-r2PhUp" data-alias="r2PhUp" data-mode-topic="ssb-box/mode/r2PhUp/state"
                    data-cmd-topic="ssb-box/switch/r2PhUp/cmd" data-switch-state-topic="ssb-box/switch/r2PhUp/state"
                    data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="r2PhUp"
                        data-alias="r2PhUp">
                    </div>
                    <label class="form-check-label mb-0">On/Off</label>
                  </div>
                </div>

                <!-- pH Down -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs0.png"
                    alt="pH Down" data-state-alias="r2PhDown"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/e6354809633c55193ae1431a7037256cc0b71d5c/kmePhs0.png">
                  <span>pH Dosing Down</span>

                  <div class="pill off" id="pill-r2PhDown" data-alias="r2PhDown"
                    data-mode-topic="ssb-box/mode/r2PhDown/state" data-cmd-topic="ssb-box/switch/r2PhDown/cmd"
                    data-switch-state-topic="ssb-box/switch/r2PhDown/state" data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="r2PhDown"
                        data-alias="r2PhDown">
                    </div>
                    <label class="form-check-label mb-0">On/Off</label>
                  </div>
                </div>

                <!-- irrigation Pump -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/47bb76d7e2611176d5c604f358fe313e2745cbe8/Sending%20S0.png"
                    alt="Circulation" data-state-alias="r2Circ"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/47bb76d7e2611176d5c604f358fe313e2745cbe8/Sending%20S1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/47bb76d7e2611176d5c604f358fe313e2745cbe8/Sending%20S0.png">
                  <span>Irrigation Pump</span>

                  <div class="pill off" id="pill-r2Circ" data-alias="r2Circ" data-mode-topic="ssb-box/mode/r2Circ/state"
                    data-cmd-topic="ssb-box/switch/r2Circ/cmd" data-switch-state-topic="ssb-box/switch/r2Circ/state"
                    data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="r2Circ"
                        data-alias="r2Circ">
                    </div>
                    <label class="form-check-label mb-0">On/Off</label>
                  </div>
                </div>
                <!-- RO Refill Pump -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/acd076a518151485a9c50fd06dc151ca73be58a0/RO%20REfillS0.png"
                    alt="Circulation" data-state-alias="r2Circ"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/acd076a518151485a9c50fd06dc151ca73be58a0/RO%20REfillS1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/acd076a518151485a9c50fd06dc151ca73be58a0/RO%20REfillS0.png">
                  <span>RO Refill Pump</span>

                  <div class="pill off" id="pill-r2Circ" data-alias="r2Circ" data-mode-topic="ssb-box/mode/r2Circ/state"
                    data-cmd-topic="ssb-box/switch/r2Circ/cmd" data-switch-state-topic="ssb-box/switch/r2Circ/state"
                    data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="r2Circ"
                        data-alias="r2Circ">
                    </div>
                    <label class="form-check-label mb-0">On/Off</label>
                  </div>
                </div>
                <!-- Circulation Pump -->
                <div class="ctrl-row">
                  <img class="icon-sm state-img"
                    src="https://github.com/reungwitk-cyber/ssb-box/raw/ffbc97b04ef269aecf7eed9ea94de0ed4ccef679/CirulationS0.png"
                    alt="Circulation" data-state-alias="r2Circ"
                    data-src-on="https://github.com/reungwitk-cyber/ssb-box/raw/ffbc97b04ef269aecf7eed9ea94de0ed4ccef679/CirulationS1.png"
                    data-src-off="https://github.com/reungwitk-cyber/ssb-box/raw/ffbc97b04ef269aecf7eed9ea94de0ed4ccef679/CirulationS0.png">
                  <span>Circulation Pump</span>

                  <div class="pill off" id="pill-r2Circ" data-alias="r2Circ" data-mode-topic="ssb-box/mode/r2Circ/state"
                    data-cmd-topic="ssb-box/switch/r2Circ/cmd" data-switch-state-topic="ssb-box/switch/r2Circ/state"
                    data-off-code="3">
                    <span data-label>Off</span>
                  </div>

                  <div class="switch-inline">
                    <div class="form-check form-switch m-0">
                      <input class="form-check-input switch-lg ssbbox-switch" type="checkbox" id="r2Circ"
                        data-alias="r2Circ">
                    </div>
                    <label class="form-check-label mb-0">On/Off</label>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </section>

      </div>
    </main>
  </div>

  <!-- =======================
       Clock script ‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤
       ======================= -->
  <script>
    const dateText = document.getElementById('dateText');
    const timeText = document.getElementById('timeText');
    function pad(n) { return String(n).padStart(2, '0'); }
    function fmt() {
      const d = new Date();
      const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      const dd = pad(d.getDate()), mm = pad(d.getMonth() + 1), yy = String(d.getFullYear()).slice(-2);
      dateText.textContent = `${dayNames[d.getDay()]}. ${dd} - ${mm} - ${yy}`;
      timeText.textContent = `Time - ${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;
    }
    fmt(); setInterval(fmt, 1000);
  </script>

  <!-- =======================
       Bootstrap JS (dropdown)
       ======================= -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


  <!-- =======================
       WebSocket ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° Node-RED (‡πÄ‡∏î‡∏¥‡∏°)
       - ‡πÄ‡∏û‡∏¥‡πà‡∏° topic 'light' (0/1)
       ======================= -->
  <!-- =======================
     MQTT (Single topic: ssb-box/sensor)
     ======================= -->
  <script>
    /* ---------- Helpers ---------- */
    // ‡∏´‡∏¢‡∏¥‡∏ö‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å‡∏à‡∏≤‡∏Å array (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏≠‡∏≤‡πÄ‡∏£‡∏¢‡πå‡∏à‡∏∞‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç)
    const first = (v, fb = null) => (Array.isArray(v) && v.length ? Number(v[0]) : (
      Number.isFinite(Number(v)) ? Number(v) : fb
    ));

    function fmtForDisplay(value, el, defaultPrec = 1) {
      const p = Number(el?.dataset.precision);
      const prec = Number.isFinite(p) ? p : defaultPrec;
      const n = Number(value);
      return Number.isFinite(n) ? n.toFixed(prec) : value;
    }
    // ===== helper: ‡∏≠‡πà‡∏≤‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏™‡∏µ 3 ‡∏ä‡πà‡∏ß‡∏á‡∏à‡∏≤‡∏Å data-* (‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ default ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î) =====
    function getColorRanges(el, min, max) {
      const r1 = Number(el?.dataset.r1);
      const r2 = Number(el?.dataset.r2);
      const c1 = el?.dataset.c1 || '#3b82f6'; // low
      const c2 = el?.dataset.c2 || '#10b981'; // mid
      const c3 = el?.dataset.c3 || '#ef4444'; // high

      // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏™‡πà r1/r2 ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô 33/66%
      const cut1 = Number.isFinite(r1) ? r1 : (min + (max - min) * 0.33);
      const cut2 = Number.isFinite(r2) ? r2 : (min + (max - min) * 0.66);

      return [
        { min: min, max: cut1, color: c1 },
        { min: cut1, max: cut2, color: c2 },
        { min: cut2, max: max, color: c3 },
      ];
    }

    function setGaugeColor(ring, value, ranges) {
      for (let r of ranges) {
        if (value >= r.min && value <= r.max) {
          ring?.style.setProperty('--progress', r.color);
          return;
        }
      }
      // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô‡∏ä‡πà‡∏ß‡∏á ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡∏ä‡πà‡∏ß‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
      if (ranges?.length) ring?.style.setProperty('--progress', ranges[ranges.length - 1].color);
    }
    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï mini gauge (‡∏ß‡∏á‡πÄ‡∏•‡πá‡∏Å)
    function setMiniGauge(el, value) {
      if (!el) return;
      const min = Number(el.dataset.min || 0);
      const max = Number(el.dataset.max || 100);
      const ring = el.querySelector('.ring');
      const num = el.querySelector('.num'); // ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô <div class="v"><span class="num">‚Ä¶</span></div>
      const nVal = Number(value);
      const pct = Math.max(0, Math.min(1, (nVal - min) / (max - min))) * 100;
      ring?.style.setProperty('--p', pct.toFixed(2));

      if (num) num.textContent = fmtForDisplay(nVal, el, 1);

      // === 3 ‡∏ä‡πà‡∏ß‡∏á‡∏™‡∏µ ===
      const ranges = getColorRanges(el, min, max);
      setGaugeColor(ring, nVal, ranges);




      if (el.id === 'nur-temp-mini') {
        const nurnt = document.getElementById('nur-nt');
        if (nurnt) nurnt.textContent = fmtForDisplay(nVal, el, 1);
      }
      if (el.id === 'nur-ec-mini') {
        const nurec = document.getElementById('nur-ec');
        if (nurec) nurec.textContent = fmtForDisplay(nVal, el, 1);
      }
      if (el.id === 'nur-ph-mini') {
        const nurph = document.getElementById('nur-ph');
        if (nurph) nurph.textContent = fmtForDisplay(nVal, el, 1);
      }

      if (el.id === 'r1-temp-mini') {
        const r1nt = document.getElementById('r1-nt');
        if (r1nt) r1nt.textContent = fmtForDisplay(nVal, el, 1);
      }

      if (el.id === 'r1-ec-mini') {
        const r1ec = document.getElementById('r1-ec');
        if (r1ec) r1ec.textContent = fmtForDisplay(nVal, el, 1);
      }

      if (el.id === 'r1-ph-mini') {
        const r1ph = document.getElementById('r1-ph');
        if (r1ph) r1ph.textContent = fmtForDisplay(nVal, el, 1);
      }
      if (el.id === 'r2-temp-mini') {
        const r2nt = document.getElementById('r2-nt');
        if (r2nt) r2nt.textContent = fmtForDisplay(nVal, el, 1);
      }

      if (el.id === 'r2-ec-mini') {
        const r2ec = document.getElementById('r2-ec');
        if (r2ec) r2ec.textContent = fmtForDisplay(nVal, el, 1);
      }

      if (el.id === 'r2-ph-mini') {
        const r2ph = document.getElementById('r2-ph');
        if (r2ph) r2ph.textContent = fmtForDisplay(nVal, el, 1);
      }








    }

    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï gauge ‡πÉ‡∏´‡∏ç‡πà (Air/RH/CO2/Light)
    function setGauge(gaugeEl, value) {
      if (!gaugeEl) return;
      const min = Number(gaugeEl.dataset.min || 0);
      const max = Number(gaugeEl.dataset.max || 100);
      const ring = gaugeEl.querySelector('.ring');
      const numEl = gaugeEl.querySelector('.num');
      const nVal = Number(value);
      const pct = Math.max(0, Math.min(1, (nVal - min) / (max - min))) * 100;
      ring?.style.setProperty('--p', pct.toFixed(2));

      if (gaugeEl.id === 'gLight') {
        if (numEl) numEl.textContent = (nVal >= 0.5) ? 'ON' : 'OFF';
      } else {
        if (numEl) numEl.textContent = fmtForDisplay(nVal, gaugeEl, 1);
        const ranges = getColorRanges(gaugeEl, min, max);
        setGaugeColor(ring, nVal, ranges);
      }

      // ‚òÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Room summary ‡∏î‡πâ‡∏ß‡∏¢
      if (gaugeEl.id === 'gAir') {
        const clmAir = document.getElementById('clm-air');
        if (clmAir) clmAir.textContent = fmtForDisplay(nVal, gaugeEl, 1);

      }
      // RH% ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï ‡∏•‡∏á‡πÉ‡∏ô‡∏Å‡∏£‡∏≠‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á
      if (gaugeEl.id === 'gRH') {
        const clmRH = document.getElementById('clm-rh');
        if (clmRH) clmRH.textContent = fmtForDisplay(nVal, gaugeEl, 1);
      }

      // CO‚ÇÇ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï ‡∏•‡∏á‡πÉ‡∏ô‡∏Å‡∏£‡∏≠‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á
      if (gaugeEl.id === 'gCO2') {
        const clmCO2 = document.getElementById('clm-co2');
        if (clmCO2) clmCO2.textContent = fmtForDisplay(nVal, gaugeEl, 0);
      }
    }

    /* ---------- ‡πÉ‡∏ä‡πâ payload ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß map ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏à‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ---------- */
    function handleSensorPayload(p) {
      console.log("üì© Sensor payload:", p);

      // ‚òÖ ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏µ‡∏¢‡πå‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏à‡∏£‡∏¥‡∏á (Backrooom* ‡∏°‡∏µ o 3 ‡∏ï‡∏±‡∏ß)
      // Gauges ‡∏´‡∏•‡∏±‡∏Å (‡∏´‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á)
      const air = first(p.BackrooomTemp);
      const rh = first(p.Backrooomhumidity);
      const co2 = first(p.BackrooomCo2);

      if (air != null) setGauge(document.getElementById('gAir'), air);
      if (rh != null) setGauge(document.getElementById('gRH'), rh);
      if (co2 != null) setGauge(document.getElementById('gCO2'), co2);

      // Nursery mini gauges
      if (p.NurseryTemp) setMiniGauge(document.getElementById('nur-temp-mini'), first(p.NurseryTemp));
      if (p.NurseryEC) setMiniGauge(document.getElementById('nur-ec-mini'), first(p.NurseryEC));
      if (p.NurserypH) setMiniGauge(document.getElementById('nur-ph-mini'), first(p.NurserypH));

      // Main Reservoir 1
      if (p.Main1Temp) setMiniGauge(document.getElementById('r1-temp-mini'), first(p.Main1Temp));
      if (p.Main1EC) setMiniGauge(document.getElementById('r1-ec-mini'), first(p.Main1EC));
      if (p.Main1pH) setMiniGauge(document.getElementById('r1-ph-mini'), first(p.Main1pH));

      // Main Reservoir 2
      if (p.Main2Temp) setMiniGauge(document.getElementById('r2-temp-mini'), first(p.Main2Temp));
      if (p.Main2EC) setMiniGauge(document.getElementById('r2-ec-mini'), first(p.Main2EC));
      if (p.Main2pH) setMiniGauge(document.getElementById('r2-ph-mini'), first(p.Main2pH));
    }

    /* ---------- WebSocket (‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å Node-RED) ---------- */
    // ‡∏ï‡∏±‡πâ‡∏á URL ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∏‡∏ì
    const WS_URL = "wss://skin-trackback-tanks-chemical.trycloudflare.com/mqtt";
    let ws, retry;

    function connect() {
      clearTimeout(retry);
      ws = new WebSocket(WS_URL);
      console.log('Connecting WS:', WS_URL);

      ws.onopen = () => console.log('‚úÖ WS connected');
      ws.onerror = () => console.warn('‚ö†Ô∏è WS error');
      ws.onclose = () => { console.warn('‚ùå WS disconnected'); retry = setTimeout(connect, 1500); };

      ws.onmessage = (evt) => {
        console.log("üõ∞Ô∏è WS raw:", evt.data);


        let msg;
        try { msg = JSON.parse(evt.data); }
        catch (e) { console.warn("‚ùå not JSON:", e); return; }

        console.log("üì¶ WS parsed:", msg);

        // ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 3 ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö: {topic,payload}, payload ‡πÄ‡∏õ‡πá‡∏ô string/object, ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πà‡∏á object ‡∏ï‡∏£‡∏á ‡πÜ
        let topic = "", payload = null;
        if (msg && typeof msg === "object") {
          if ("topic" in msg) topic = String(msg.topic || "").trim();
          if ("payload" in msg) {
            payload = msg.payload;
            if (typeof payload === "string") {
              try { payload = JSON.parse(payload); } catch { /* ‡∏Ç‡πâ‡∏≤‡∏° */ }
            }
          } else {
            payload = msg; // ‡∏™‡πà‡∏á object ‡∏ï‡∏£‡∏á ‡πÜ
          }
        }

        console.log("üîñ Topic seen:", topic || "(none)");
        console.log("üì© Payload resolved:", payload);

        // ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏ñ‡πâ‡∏≤ topic ‡∏ß‡πà‡∏≤‡∏á (‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á) ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö ssb-box/sensor
        if (topic && topic !== "ssb-box/sensor") {
          console.log("‚è≠Ô∏è skip other topic:", topic);
          return;
        }
        if (!payload || typeof payload !== "object") {
          console.warn("‚ö†Ô∏è bad payload shape");
          return;
        }

        handleSensorPayload(payload);
        saveSnapshot(payload);//‡∏à‡∏≥‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
      };
    }

    // ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô WS ‡∏°‡∏≤‡∏ñ‡∏∂‡∏á (optional)
    setGauge(document.getElementById('gAir'), 30);
    setGauge(document.getElementById('gRH'), 55);
    setGauge(document.getElementById('gCO2'), 1200);
    // setGauge(document.getElementById('gLight'), 1); // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° light ‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡∏¥‡∏î

    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ mini gauge ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (optional)
    [
      ['#nur-temp-mini', 30],
      ['#nur-ec-mini', 1.2],
      ['#nur-ph-mini', 6.5],
      ['#r1-temp-mini', 30],
      ['#r1-ec-mini', 1.2],
      ['#r1-ph-mini', 6.5],
      ['#r2-temp-mini', 30],
      ['#r2-ec-mini', 1.2],
      ['#r2-ph-mini', 6.5],
    ].forEach(([sel, val]) => {
      const el = document.querySelector(sel);
      if (el) setMiniGauge(el, val);
    });

    connect();
  </script>



  <!-- =======================
       Dark/Light toggle (‡πÄ‡∏î‡∏¥‡∏°)
       ======================= -->
  <script>
    (function () {
      const BTN = document.querySelector('.darklight');
      const ROOT = document.body;
      function setBtnLabel() {
        const saved = localStorage.getItem('themeIcon') || 'dark';
        BTN.textContent = (saved === 'dark') ? 'üåô Dark' : '‚òÄÔ∏è Light';
      }
      BTN.addEventListener('click', () => {
        const cur = localStorage.getItem('themeIcon') || 'dark';
        const next = (cur === 'dark') ? 'light' : 'dark';
        localStorage.setItem('themeIcon', next);
        setBtnLabel();
        // (‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏°‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡πÉ‡∏´‡πâ toggle class .theme-dark ‡∏ó‡∏µ‡πà ROOT)
        // ROOT.classList.toggle('theme-dark');
      });
      setBtnLabel();
    })();
  </script>

  <!-- =======================
       ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î + ‡∏™‡∏õ‡∏≤‡∏£‡πå‡∏Ñ‡∏•‡∏≤‡∏¢‡∏ô‡πå (‡πÄ‡∏î‡∏¥‡∏°)
       ======================= -->
  <script>
    function setRoomData() {
      document.getElementById('nur-recipe').textContent = 'RX-01';
      document.getElementById('nur-nt').textContent = 25;
      document.getElementById('nur-ec').textContent = 1.2;
      document.getElementById('nur-ph').textContent = 6;

      document.getElementById('clm-name').textContent = 'CL-01';
      document.getElementById('clm-air').textContent = 25;
      document.getElementById('clm-rh').textContent = 70;
      document.getElementById('clm-co2').textContent = 1000;
      document.getElementById('clm-light').textContent = 12;

      document.getElementById('r1-recipe').textContent = 'RX-11';
      document.getElementById('r2-recipe').textContent = 'RX-12';
    }
    setRoomData();

    function sparkPath(vals) {
      const W = 300, H = 140, pt = [10, 70, 130, 190, 250], top = 20, bot = 120;
      const ys = vals.map(v => bot - (bot - top) * v);
      return `M${pt[0]},${ys[0]} ${pt[1]},${ys[1]} ${pt[2]},${ys[2]} ${pt[3]},${ys[3]} ${pt[4]},${ys[4]}`;
    }
    document.querySelector('.spark path.s1').setAttribute('d', sparkPath([0.1, 0.35, 0.55, 0.9, 0.75]));
    document.querySelector('.spark path.s2').setAttribute('d', sparkPath([0.1, 0.25, 0.2, 0.45, 0.45]));
    document.querySelector('.spark path.s3').setAttribute('d', sparkPath([0.1, 0.42, 0.35, 0.6, 0.5]));
  </script>

  <!-- =========================================================
       ‡∏à‡∏≥‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
       ========================================================= -->
  <script>
    /* === Snapshot: ‡∏à‡∏≥‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÑ‡∏ß‡πâ‡πÉ‡∏ô localStorage === */
    const SNAP_KEY = 'ssbbox:last-sensor';
    const SNAP_MAX_AGE_MS = 0;  // 10 ‡∏ô‡∏≤‡∏ó‡∏µ (‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô 0 = ‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏)

    function saveSnapshot(payload) {
      try {
        localStorage.setItem(SNAP_KEY, JSON.stringify({ ts: Date.now(), data: payload }));
      } catch (e) { console.warn('saveSnapshot failed', e); }
    }

    function loadSnapshot() {
      try {
        const raw = localStorage.getItem(SNAP_KEY);
        if (!raw) return null;
        const snap = JSON.parse(raw);
        if (!snap || !snap.data) return null;
        if (SNAP_MAX_AGE_MS > 0 && Date.now() - (snap.ts || 0) > SNAP_MAX_AGE_MS) return null;
        return snap.data;
      } catch (e) { console.warn('loadSnapshot failed', e); return null; }
    }

    /* === ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤: ‡∏•‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô === */
    (function initFromSnapshot() {
      const snap = loadSnapshot();
      if (snap) {
        console.log('üóÇÔ∏è load snapshot', snap);
        handleSensorPayload(snap);       // ‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
      } else {
        // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ snapshot ‡∏Å‡πá‡∏à‡∏∞‡πÇ‡∏ä‡∏ß‡πå‡∏Ñ‡πà‡∏≤ default ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
        // (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏ö‡∏•‡πá‡∏≠‡∏Å setGauge/setMiniGauge ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß)
      }
    })();
  </script>
  <!-- =========================================================
      ‡πÇ‡∏ô‡πá‡∏ï‡∏Ñ‡πà‡∏≤‡πÅ‡∏õ‡∏•‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏•‡∏á
Gauges ‡πÉ‡∏´‡∏ç‡πà (4 ‡∏ß‡∏á)

BackrooomTemp ‚Üí Air temperature (‡πÄ‡∏Å‡∏à‡πÉ‡∏´‡∏ç‡πà #gAir)

Backrooomhumidity ‚Üí RH% (‡πÄ‡∏Å‡∏à‡πÉ‡∏´‡∏ç‡πà #gRH)

BackrooomCo2 ‚Üí CO‚ÇÇ ppm (‡πÄ‡∏Å‡∏à‡πÉ‡∏´‡∏ç‡πà #gCO2)

Light ‚Üí ON/OFF (‡πÄ‡∏Å‡∏à‡πÉ‡∏´‡∏ç‡πà #gLight) ‚Üí ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ payload ‡πÄ‡∏î‡∏¥‡∏°‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ key ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏à‡∏≤‡∏Å Node-RED

üîπ Mini Gauges Nursery (3 ‡∏ß‡∏á)

NurseryTemp ‚Üí Temp ‡∏Ç‡∏≠‡∏á nutrient (mini #nur-temp-mini)

NurseryEC ‚Üí EC (mini #nur-ec-mini)

NurserypH ‚Üí pH (mini #nur-ph-mini)

üîπ Mini Gauges Main Reservoir 1 (3 ‡∏ß‡∏á)

Main1Temp ‚Üí Temp (mini #r1-temp-mini)

Main1EC ‚Üí EC (mini #r1-ec-mini)

Main1pH ‚Üí pH (mini #r1-ph-mini)

üîπ Mini Gauges Main Reservoir 2 (3 ‡∏ß‡∏á)

Main2Temp ‚Üí Temp (mini #r2-temp-mini)

Main2EC ‚Üí EC (mini #r2-ec-mini)

Main2pH ‚Üí pH (mini #r2-ph-mini)
       ========================================================= -->
  <script>
    // ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏ó‡πá‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏≤‡∏° data-href
    (function enableTabNavigate() {
      const tabs = document.querySelectorAll('.tabs .tab');
      tabs.forEach(tab => {
        tab.style.cursor = 'pointer';
        tab.addEventListener('click', () => {
          // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô active ‡πÉ‡∏´‡πâ‡∏°‡∏µ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏Å‡∏î (‡∏™‡∏ß‡∏¢ ‡πÜ ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∞‡∏¢‡πâ‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤)
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');

          const url = tab.dataset.href;
          if (url) {
            window.location.href = url;   // ‚¨ÖÔ∏è ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤
          }
        });
      });
    })();
  </script>
  <!-- Dark/Light toggle ========================================================= -->
  <script>
    (function () {
      const BTN = document.querySelector('.darklight'), ROOT = document.body;
      function setBtnLabel() { const saved = localStorage.getItem('themeIcon') || 'dark'; BTN.textContent = (saved === 'dark') ? 'üåô Dark' : '‚òÄÔ∏è Light'; }
      BTN.addEventListener('click', () => {
        const cur = localStorage.getItem('themeIcon') || 'dark';
        const next = (cur === 'dark') ? 'light' : 'dark';
        localStorage.setItem('themeIcon', next);
        setBtnLabel();
        // ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏°‡∏∑‡∏î‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏´‡πâ toggle ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á
        // ROOT.classList.toggle('theme-dark');
      });
      setBtnLabel();
    })();
  </script>

</body>

</html>