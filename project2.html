<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LAB BOX ‚Äì Dashboard</title>

  <!-- =======================
       üîΩ SWITCH DROPDOWN LAB BOX 
       Bootstrap CSS
       ======================= -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- ======================= -->

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    /* =======================
       ‚òÖ ‡∏Å‡∏£‡∏≤‡∏ü‡∏ß‡∏á‡∏Å‡∏•‡∏° (gauge) ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°
       - ‡πÉ‡∏ä‡πâ grid + conic-gradient ‡∏ó‡∏≥ progress
       ======================= */
    .gauges {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
      padding: 12px;
    }
    .gauge { display: flex; flex-direction: column; align-items: center; gap: 8px; }
    .gauge .ring{
      --size: 125px; --track: #e5e7eb; --progress: #6ee7b7;
      width: var(--size); height: var(--size); border-radius: 999px;
      position: relative; display: grid; place-items: center;
      background:
        radial-gradient(#fff calc(50% - 10px), transparent calc(50% - 9px)),
        conic-gradient(var(--progress) calc(var(--p)*1%), var(--track) 0);
      box-shadow: 0 6px 16px rgba(0, 0, 0, .08), inset 0 0 0 1px #f1f5f9;
    }
    .gauge .ring img{ width:54px; height:54px; object-fit:contain; border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,.12); background:#fff; padding:6px; }
    .gauge .value{ position:absolute; bottom:12px; left:0; right:0; text-align:center; font-weight:700; font-size:18px; }
    .gauge .unit{ font-size:12px; opacity:.8; margin-left:2px }
    .gauge .label{ font-size:12px; font-weight:600; color:#0f172a; background:#eeffcf; border:1px solid #cce68f; padding:4px 12px; border-radius:999px; box-shadow:0 1px 3px rgba(0,0,0,.06); }
    /* ‡∏™‡∏µ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ gauge ‡πÄ‡∏î‡∏¥‡∏° */
    #gAir .ring{ --progress:#f87171 } /* Temp */
    #gRH  .ring{ --progress:#34d399 } /* RH */
    #gCO2 .ring{ --progress:#fb923c } /* CO2 */

    /* =======================
       ‚òÖ ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ò‡∏µ‡∏° + ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°)
       ======================= */
    :root{
      --bg:#f0f2f5; --panel:#ffffff; --ink:#121619; --muted:#6b7280;
      --brand:#b7f36a; --accent:#9ad83f; --accent-dark:#94c93e;
      --sidebar:#ffffff; --sidebar-border:#cde88b; --tab-height:40px; --sidebar-width:220px;
    }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{ margin:0; font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif; color:var(--ink); background:var(--bg); }
    .app{ display:grid; grid-template-columns: var(--sidebar-width) 1fr; grid-template-rows: auto 1fr; height:100vh; }

    /* Topbar (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°) */
    .topbar{ grid-column:1/-1; background:var(--panel); border-bottom:1px solid #e5e7eb; position:relative; }
    .topbar-inner{ display:flex; align-items:center; gap:16px; padding:10px 16px; }
    .brand-badge{ display:flex; align-items:center; gap:10px; font-weight:700; }
    .brand-logo{ height:34px; }
    .brand-text{ font-weight:700; letter-spacing:.5px; }
    .title{ background:var(--panel); border:1px solid var(--sidebar-border); padding:0 12px; border-radius:6px; font-weight:700; margin-right:10px; font-size:22px; color:#0f172a; letter-spacing:.5px; box-shadow:0 2px 6px rgba(0,0,0,.08); }
    .tabs{ flex:1; display:flex; align-items:flex-end; height:var(--tab-height); background:var(--brand); border-left:1px solid var(--sidebar-border); border-right:1px solid var(--sidebar-border); border-top-left-radius:6px; border-top-right-radius:6px; overflow-x:auto; scrollbar-width:none; }
    .tabs::-webkit-scrollbar{ display:none }
    .tab{ position:relative; height:var(--tab-height); line-height:var(--tab-height); padding:0 18px; font-size:13px; color:#1f2937; cursor:pointer; user-select:none; }
    .tab.active{ font-weight:600; border-bottom:3px solid #3a3a3a; }
    .tab:hover{ background:rgba(0,0,0,.04); }

    /* NOTE: ‡πÅ‡∏Å‡πâ clock ‡πÉ‡∏´‡πâ‡∏à‡∏±‡∏î‡∏Ç‡∏ß‡∏≤‡∏î‡πâ‡∏ß‡∏¢ .topbar-right (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°) */
    .clock{ position:absolute; right:14px; top:8px; text-align:right; font-size:13px; }
    .clock .date,.clock .time{ font-weight:700; }
    .topbar-right{ margin-left:auto; display:flex; align-items:center; gap:12px; }
    .topbar-right .clock{ position:static; }

    /* Sidebar (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°) */
    .sidebar{ grid-row:2/-1; background:var(--sidebar); border-right:2px solid var(--sidebar-border); display:flex; flex-direction:column; min-width:0; }
    .side-header{ display:flex; align-items:center; gap:10px; padding:12px 14px; border-bottom:1px solid var(--sidebar-border); font-weight:600; }
    .side-logo{ display:flex; align-items:center; gap:8px; font-weight:700; }
    .side-logo img{ height:38px; }
    .side-section{ padding:10px 14px; font-size:13px; color:#111; }
    .menu{ padding:8px 8px 18px; display:flex; flex-direction:column; gap:8px; }
    .menu-btn{ display:grid; grid-template-columns:44px 1fr; align-items:center; gap:10px; padding:10px 8px; border-radius:8px; border:1px solid transparent; cursor:pointer; text-align:left; background:#fff; transition:.2s ease; color:#111; }
    .menu-btn:hover{ border-color:var(--accent); background:#fafff1; }
    .menu-btn.active{ background:#eaffc8; border-color:var(--accent); font-weight:600; }
    .ico img{ width:40px; height:40px; display:block; }

    /* Content shell (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°) */
    .content{ grid-column:2/-1; grid-row:2/-1; background:var(--panel); margin:12px; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,.05); border:1px solid #e5e7eb; }
    .muted{ color:var(--muted); }

    /* =======================
       ‚òÖ Room summary (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°) ‚Äì ‡∏ã‡πâ‡∏≤‡∏¢:‡∏Å‡∏£‡∏≤‡∏ü ‡∏Ç‡∏ß‡∏≤:‡∏Å‡∏≤‡∏£‡πå‡∏î 4 ‡πÉ‡∏ö
       ======================= */
    .room-summary{ display:grid; grid-template-columns: 1fr 2fr; gap:8px; padding:8px; }
    .room-left{ background:#fff; border:1px solid #e5e7eb; border-radius:6px; padding:8px 8px 2px 8px; }
    .room-title{ display:inline-block; background:#d9f2b6; color:#274a0b; font-weight:700; font-size:12px; padding:4px 10px; border-radius:6px; margin-bottom:6px; }
    .spark{ width:100%; height:100px; }
    .spark .grid line{ stroke:#e5e7eb; stroke-width:1; }
    .spark path{ fill:none; stroke-linecap:round; stroke-linejoin:round; stroke-width:3; }
    .spark path.s1{ stroke:#ef4444; } .spark path.s2{ stroke:#10b981; } .spark path.s3{ stroke:#f59e0b; }
    .spark .dots circle.s1{ fill:#ef4444 } .spark .dots circle.s2{ fill:#10b981 } .spark .dots circle.s3{ fill:#f59e0b }
    .room-cards{ display:grid; grid-template-columns: repeat(4, 1fr); gap:8px; }
    .mini-card{ background:#fff; border:1px solid #e5e7eb; border-radius:6px; overflow:hidden; }
    .mini-card header{ padding:6px 10px; font-weight:700; font-size:12px; color:#111; }
    .mini-card.nursery header{ background:#ffe0c7; }
    .mini-card.climate header{ background:#cfe2ff; }
    .mini-card.mv1 header,.mini-card.mv2 header{ background:#e8f7d4; }
    .mini-card .body{ padding:6px 10px; font-size:12px; color:#222; }
    .mini-card .row{ display:grid; grid-template-columns: 1fr auto; align-items:center; gap:8px; padding:2px 0; }
    .mini-card .row .label{ opacity:.9; } .mini-card .row .value{ font-weight:700; white-space:nowrap; }
    .mini-card .row .unit{ margin-left:4px; opacity:.8 }

    /* =======================
       ‚òÖ Responsive (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°)
       ======================= */
    @media (max-width:1100px){
      .room-summary{ grid-template-columns:1fr; }
      .room-cards{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width:640px){
      .room-cards{ grid-template-columns:1fr; }
    }

    /* =======================
       ‚òÖ Dropdown style (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°)
       ======================= */
    .sidebar .dropdown .btn{ background:#ffffff; border-radius:12px; font-weight:600; box-shadow:0 4px 10px rgba(0,0,0,0.15); transition:all .3s ease; width:100%; text-align:left; }
    .sidebar .dropdown .btn:hover{ background:#f1f1f1; transform: translateY(-2px); }
    .sidebar .dropdown-menu{ border-radius:12px; border:none; box-shadow:0 6px 20px rgba(0,0,0,0.15); animation: fadeIn .3s ease; width:100%; z-index:1000; }
    .sidebar .dropdown-item{ font-weight:500; padding:10px 20px; transition:all .2s ease; }
    .sidebar .dropdown-item:hover{ background-color:#fda085; color:#fff; border-radius:8px; }
    @keyframes fadeIn{ from{opacity:0; transform: translateY(10px);} to{opacity:1; transform: translateY(0);} }

    /* =======================
       ‚òÖ ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏° (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°)
       ======================= */
    .darklight{ margin-left:auto; padding:6px 12px; border-radius:20px; background:#f1f5f9; color:#0f172a; font-weight:600; font-size:14px; cursor:pointer; user-select:none; transition:.2s; border:1px solid #e2e8f0; }
    .darklight:hover{ background:#e2e8f0 }
    .theme-dark{
      --bg:#0b1220; --panel:#0f172a; --ink:#e5e7eb; --muted:#94a3b8;
      --brand:#3f6212; --accent:#84cc16; --accent-dark:#65a30d; --sidebar:#0f172a; --sidebar-border:#334155;
    }
    .theme-dark .content,.theme-dark .sidebar,.theme-dark .topbar{ border-color:var(--sidebar-border); box-shadow:0 2px 10px rgba(0,0,0,.4); }
    .theme-dark #gAir .ring{ --progress:#f87171 } .theme-dark #gRH .ring{ --progress:#34d399 } .theme-dark #gCO2 .ring{ --progress:#fb923c }

    /* =========================================================
       ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° ‚ÄúLayout ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á .content-inner‚Äù ‡πÉ‡∏´‡πâ‡∏à‡∏±‡∏î‡πÅ‡∏ö‡∏ö‡∏†‡∏≤‡∏û‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
       - ‡∏ß‡∏≤‡∏á Tabs > Room summary > Gauges (4 ‡∏ß‡∏á) > 3 Panels
       ========================================================= */
    .content-inner{
      display:grid;
      grid-template-columns: repeat(12, 1fr);   /* 12 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô */
      grid-auto-rows: min-content;
      gap:12px;
      padding:12px;
      border-left:3px solid var(--accent);
    }
    .content-inner > .tabs,
    .content-inner > .room-summary{ grid-column:1 / -1; } /* ‡∏Å‡∏¥‡∏ô‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏ñ‡∏ß */
    .content-inner > .gauges{
      grid-column:1 / -1;                         /* ‡∏Å‡∏¥‡∏ô‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏ñ‡∏ß */
      display:grid; grid-template-columns: repeat(4, 1fr); gap:16px;
    }
    .res-panels{
      grid-column:1 / -1; display:grid; grid-template-columns: repeat(3, 1fr); gap:16px;
    }
    .panel{ background:#fff; border:1px solid #e5e7eb; border-radius:8px; overflow:hidden; }
    .panel header{ background:#f4f6f0; font-weight:700; padding:8px 12px; }
    .panel .panel-body{ padding:12px; }
    .panel .triple{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; }
    .mini-gauge{ display:grid; place-items:center; gap:6px; padding:10px; border:1px solid #e5e7eb; border-radius:10px; }
    .mini-gauge .v{ font-weight:700; font-size:14px; }
    .mini-gauge .t{ font-size:12px; opacity:.8 }
    .panel .status{ margin-top:12px; display:grid; grid-template-columns: 1fr 1fr; gap:8px; font-size:12px; }
    .status .row{ display:flex; align-items:center; justify-content:space-between; background:#f8fafc; border:1px solid #e5e7eb; border-radius:8px; padding:6px 8px; }

    /* Responsive ‡∏Ç‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏° */
    @media (max-width:1100px){
      .content-inner > .gauges{ grid-template-columns: repeat(2, 1fr); }
      .res-panels{ grid-template-columns: 1fr; }
    }
    @media (max-width:640px){
      .content-inner{ gap:8px; padding:8px; }
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- =======================
         Topbar
         ======================= -->
    <header class="topbar">
      <div class="topbar-inner">
        <div class="brand-badge">
          <img src="https://github.com/reungwitk-cyber/ssb-box/raw/c958231f7e20c74bff3076384c1e46bbee9eec24/Logosbb-box.png" alt="SABIENG BOX Logo" class="brand-logo">
          <div class="brand-text"></div>
        </div>
        <div class="title">LAB BOX</div>

        <!-- ‡∏õ‡∏∏‡πà‡∏° + ‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏ß‡∏≤ -->
        <div class="topbar-right">
          <button class="darklight">darklight</button>
          <div class="clock">
            <div class="date" id="dateText">Mon. 12 - 09 - 25</div>
            <div class="time" id="timeText">Time - 17:12:35</div>
          </div>
        </div>
      </div>
    </header>

    <!-- =======================
         Sidebar
         ======================= -->
    <aside class="sidebar">
      <div class="menu" style="padding-top:10px">
        <button class="menu-btn active">
          <span class="ico"><img src="https://github.com/reungwitk-cyber/ssb-box/raw/c958231f7e20c74bff3076384c1e46bbee9eec24/homesw1.png" alt="Home"></span>
          <span>Sabieng HQ</span>
        </button>
      </div>

      <!-- Dropdown ‡∏™‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ -->
      <div class="side-section">
        <div class="dropdown">
          <button class="btn dropdown-toggle px-4 py-2" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            ‚öôÔ∏è LAB BOX
          </button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="lab.html">LAB BOX</a></li>
            <li><a class="dropdown-item" href="single.html">SINGLE</a></li>
            <li><a class="dropdown-item" href="double.html">DOUBLE</a></li>
          </ul>
        </div>
      </div>

      <div class="menu">
        <button class="menu-btn"><span class="ico"><img src="https://github.com/reungwitk-cyber/ssb-box/raw/695cd88b6d596bfbd2b4bb6e83b47e81ab779a1f/RecipeSw.png" alt="Recipes"></span><span>Recipes</span></button>
        <button class="menu-btn"><span class="ico"><img src="https://github.com/reungwitk-cyber/ssb-box/raw/cf3649fc297bab4602cac39e05810940d42b774f/Crop%20yield.png" alt="Crop scheduling"></span><span>Crop scheduling</span></button>
        <button class="menu-btn"><span class="ico"><img src="https://github.com/reungwitk-cyber/ssb-box/raw/cf3649fc297bab4602cac39e05810940d42b774f/Crop%20scheduling.png" alt="Crop yield"></span><span>Crop yield</span></button>
        <button class="menu-btn"><span class="ico"><img src="https://github.com/reungwitk-cyber/ssb-box/raw/cf3649fc297bab4602cac39e05810940d42b774f/Energy%20Management.png" alt="Energy"></span><span>Energy Management</span></button>
        <button class="menu-btn"><span class="ico"><img src="https://github.com/reungwitk-cyber/ssb-box/raw/cf3649fc297bab4602cac39e05810940d42b774f/SettingSw1.png" alt="Settings"></span><span>Setting</span></button>
        <button class="menu-btn"><span class="ico"><img src="https://github.com/reungwitk-cyber/ssb-box/raw/cf3649fc297bab4602cac39e05810940d42b774f/Help.png" alt="Help"></span><span>Help</span></button>
      </div>
    </aside>

    <!-- =======================
         Content
         ======================= -->
    <main class="content">
      <div class="content-inner">
        <!-- Tabs -->
        <nav class="tabs">
          <div class="tab active">Dashboard</div>
          <div class="tab">Control Climate</div>
          <div class="tab">Control Nutrients</div>
          <div class="tab">Recipe</div>
          <div class="tab">Notification</div>
          <div class="tab">Analysis</div>
        </nav>

        <!-- Room summary (‡∏ã‡πâ‡∏≤‡∏¢‡∏Å‡∏£‡∏≤‡∏ü ‡∏Ç‡∏ß‡∏≤‡∏Å‡∏≤‡∏£‡πå‡∏î 4 ‡πÉ‡∏ö) -->
        <section class="room-summary">
          <div class="room-left">
            <div class="room-title">Room</div>
            <svg class="spark" viewBox="0 0 300 140" preserveAspectRatio="none">
              <g class="grid">
                <line x1="0" y1="120" x2="300" y2="120" />
                <line x1="0" y1="90" x2="300" y2="90" />
                <line x1="0" y1="60" x2="300" y2="60" />
                <line x1="0" y1="30" x2="300" y2="30" />
              </g>
              <path class="s1" d="M10,120 70,90 130,70 190,40 250,55" />
              <path class="s2" d="M10,120 70,110 130,95 190,75 250,75" />
              <path class="s3" d="M10,120 70,95 130,105 190,90 250,65" />
              <g class="dots">
                <circle class="s1" cx="250" cy="55" r="4" />
                <circle class="s2" cx="250" cy="75" r="4" />
                <circle class="s3" cx="250" cy="65" r="4" />
              </g>
            </svg>
          </div>

          <div class="room-cards">
            <article class="mini-card climate">
              <header><span>Farm Climate</span></header>
              <div class="body">
                <div class="row"><span class="label">Climate</span><span class="value"><b id="clm-name">CL-01</b></span></div>
                <div class="row"><span class="label">Air temp</span><span class="value"><b id="clm-air">25</b><span class="unit">C</span></span></div>
                <div class="row"><span class="label">RH%</span><span class="value"><b id="clm-rh">70</b><span class="unit">%</span></span></div>
                <div class="row"><span class="label">CO‚ÇÇ</span><span class="value"><b id="clm-co2">1000</b><span class="unit">ppm</span></span></div>
                <div class="row"><span class="label">Light (hrs)</span><span class="value"><b id="clm-light">12</b><span class="unit">Hrs</span></span></div>
              </div>
            </article>

            <article class="mini-card nursery">
              <header><span>Nursery</span></header>
              <div class="body">
                <div class="row"><span class="label">Recipe</span><span class="value"><b id="nur-recipe">RX-01</b></span></div>
                <div class="row"><span class="label">Nutrient Temp</span><span class="value"><b id="nur-nt">25</b><span class="unit">C</span></span></div>
                <div class="row"><span class="label">EC</span><span class="value"><b id="nur-ec">1.2</b></span></div>
                <div class="row"><span class="label">pH</span><span class="value"><b id="nur-ph">6</b></span></div>
              </div>
            </article>

            <article class="mini-card mv1">
              <header><span>Main Reservoir 1</span></header>
              <div class="body">
                <div class="row"><span class="label">Reservoir 1</span><span class="value"><b id="r1-recipe">RX-11</b></span></div>
                <div class="row"><span class="label">Nutrient Temp</span><span class="value"><b id="r1-nt">25</b><span class="unit">C</span></span></div>
                <div class="row"><span class="label">EC</span><span class="value"><b id="r1-ec">1.2</b></span></div>
                <div class="row"><span class="label">pH</span><span class="value"><b id="r1-ph">6</b></span></div>
              </div>
            </article>

            <article class="mini-card mv2">
              <header><span>Main Reservoir 2</span></header>
              <div class="body">
                <div class="row"><span class="label">Reservoir 2</span><span class="value"><b id="r2-recipe">RX-12</b></span></div>
                <div class="row"><span class="label">Nutrient Temp</span><span class="value"><b id="r2-nt">25</b><span class="unit">C</span></span></div>
                <div class="row"><span class="label">EC</span><span class="value"><b id="r2-ec">1.2</b></span></div>
                <div class="row"><span class="label">pH</span><span class="value"><b id="r2-ph">6</b></span></div>
              </div>
            </article>
          </div>
        </section>

        <!-- Gauges: 4 ‡∏ß‡∏á (Air, RH, CO2, Light) -->
        <section class="gauges">
          <!-- Air temp -->
          <div class="gauge" id="gAir" data-min="0" data-max="50">
            <div class="ring" style="--p:0">
              <img src="https://github.com/reungwitk-cyber/ssb-box/raw/497513610937edbe8884a21c7b8c3d916d96a5b7/icon%20temp.png" alt="Air temp">
              <div class="value"><span class="num">30</span><span class="unit">¬∞C</span></div>
            </div>
            <div class="label">Air temp</div>
          </div>

          <!-- RH -->
          <div class="gauge" id="gRH" data-min="0" data-max="100">
            <div class="ring" style="--p:0">
              <img src="https://github.com/reungwitk-cyber/ssb-box/raw/497513610937edbe8884a21c7b8c3d916d96a5b7/RH%20ICON.png" alt="RH">
              <div class="value"><span class="num">55</span><span class="unit">%</span></div>
            </div>
            <div class="label">RH%</div>
          </div>

          <!-- CO2 -->
          <div class="gauge" id="gCO2" data-min="0" data-max="3000">
            <div class="ring" style="--p:0">
              <img src="https://github.com/reungwitk-cyber/ssb-box/raw/497513610937edbe8884a21c7b8c3d916d96a5b7/CO2.png" alt="CO‚ÇÇ">
              <div class="value"><span class="num">1200</span><span class="unit">ppm</span></div>
            </div>
            <div class="label">CO‚ÇÇ</div>
          </div>

          <!-- ‚úÖ Light (‡πÉ‡∏´‡∏°‡πà) -->
          <div class="gauge" id="gLight" data-min="0" data-max="1">
            <div class="ring" style="--p:0">
              <img src="https://github.com/reungwitk-cyber/ssb-box/raw/497513610937edbe8884a21c7b8c3d916d96a5b7/Light.png" alt="Light">
              <div class="value"><span class="num">ON</span></div>
            </div>
            <div class="label">Light</div>
          </div>
        </section>

        <!-- ‚úÖ ‡πÅ‡∏ú‡∏á 3 ‡πÉ‡∏ö: Nursery / Main 1 / Main 2 -->
        <section class="res-panels">
          <article class="panel">
            <header>Nursery Reservoir</header>
            <div class="panel-body">
              <div class="triple">
                <div class="mini-gauge"><div class="v" id="nur-nt2">30 ¬∞C</div><div class="t">Nutrient Temp</div></div>
                <div class="mini-gauge"><div class="v" id="nur-ec2">0.6</div><div class="t">EC (mS/cm)</div></div>
                <div class="mini-gauge"><div class="v" id="nur-ph2">6.5</div><div class="t">pH</div></div>
              </div>
              <div class="status">
                <div class="row"><span>Irrigation</span><span id="nur-ir">ON</span></div>
                <div class="row"><span>Nutrient A level</span><span>OK</span></div>
                <div class="row"><span>UV lamp</span><span>ON</span></div>
                <div class="row"><span>Nutrient B level</span><span>OK</span></div>
                <div class="row"><span>Reservoir Level</span><span>Nearly Empty</span></div>
                <div class="row"><span>pH up level</span><span>OK</span></div>
                <div class="row"><span>Supplement level</span><span>Nearly Empty</span></div>
                <div class="row"><span></span><span></span></div>
              </div>
            </div>
          </article>

          <article class="panel">
            <header>Main Reservoir 1</header>
            <div class="panel-body">
              <div class="triple">
                <div class="mini-gauge"><div class="v" id="r1-nt2">30 ¬∞C</div><div class="t">Nutrient Temp</div></div>
                <div class="mini-gauge"><div class="v" id="r1-ec2">0.6</div><div class="t">EC (mS/cm)</div></div>
                <div class="mini-gauge"><div class="v" id="r1-ph2">6.5</div><div class="t">pH</div></div>
              </div>
              <div class="status">
                <div class="row"><span>Irrigation</span><span>ON</span></div>
                <div class="row"><span>Nutrient A level</span><span>OK</span></div>
                <div class="row"><span>UV lamp</span><span>OFF</span></div>
                <div class="row"><span>Nutrient B level</span><span>OK</span></div>
                <div class="row"><span>Reservoir Level</span><span>OK</span></div>
                <div class="row"><span>pH up level</span><span>OK</span></div>
                <div class="row"><span>Supplement level</span><span>Nearly Empty</span></div>
                <div class="row"><span></span><span></span></div>
              </div>
            </div>
          </article>

          <article class="panel">
            <header>Main Reservoir 2</header>
            <div class="panel-body">
              <div class="triple">
                <div class="mini-gauge"><div class="v" id="r2-nt2">30 ¬∞C</div><div class="t">Nutrient Temp</div></div>
                <div class="mini-gauge"><div class="v" id="r2-ec2">0.6</div><div class="t">EC (mS/cm)</div></div>
                <div class="mini-gauge"><div class="v" id="r2-ph2">6.5</div><div class="t">pH</div></div>
              </div>
              <div class="status">
                <div class="row"><span>Irrigation</span><span>OFF</span></div>
                <div class="row"><span>Nutrient A level</span><span>OK</span></div>
                <div class="row"><span>UV lamp</span><span>ON</span></div>
                <div class="row"><span>Nutrient B level</span><span>OK</span></div>
                <div class="row"><span>Reservoir Level</span><span>LOW</span></div>
                <div class="row"><span>pH up level</span><span>OK</span></div>
                <div class="row"><span>Supplement level</span><span>Nearly Empty</span></div>
                <div class="row"><span></span><span></span></div>
              </div>
            </div>
          </article>
        </section>
      </div>
    </main>
  </div>

  <!-- =======================
       Clock script (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°)
       ======================= -->
  <script>
    const dateText = document.getElementById('dateText');
    const timeText = document.getElementById('timeText');
    function pad(n){ return String(n).padStart(2,'0'); }
    function fmt(){
      const d = new Date();
      const dayNames = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
      const dd = pad(d.getDate()), mm = pad(d.getMonth()+1), yy = String(d.getFullYear()).slice(-2);
      dateText.textContent = `${dayNames[d.getDay()]}. ${dd} - ${mm} - ${yy}`;
      timeText.textContent = `Time - ${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;
    }
    fmt(); setInterval(fmt, 1000);
  </script>

  <!-- =======================
       Bootstrap JS (dropdown)
       ======================= -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- =======================
       Gauge helper (‡πÅ‡∏Å‡πâ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Light ON/OFF)
       ======================= -->
  <script>
    function setGauge(gaugeEl, value){
      const min = Number(gaugeEl.dataset.min || 0);
      const max = Number(gaugeEl.dataset.max || 100);
      const ring = gaugeEl.querySelector('.ring');
      const numEl = gaugeEl.querySelector('.num');
      const pct = Math.max(0, Math.min(1, (value - min) / (max - min))) * 100;
      ring.style.setProperty('--p', pct.toFixed(2));
      if(gaugeEl.id === 'gLight'){
        // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô ON/OFF
        numEl.textContent = (value >= 0.5) ? 'ON' : 'OFF';
      }else{
        numEl.textContent = value;
      }
    }
  </script>

  <!-- =======================
       WebSocket ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° Node-RED
       - ‡πÄ‡∏û‡∏¥‡πà‡∏° topic 'light' (0/1)
       ======================= -->
  <script>
    // ‚òÖ ‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö Node-RED ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    // const WS_URL = "ws://192.168.11.50:1880/mqtt";
    const WS_URL = "wss://skin-trackback-tanks-chemical.trycloudflare.com/mqtt";

    // ‚òÖ ‡∏ä‡∏∑‡πà‡∏≠ topic ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á flow
    const topics = {
      air:   "farmgo/sensor/air/temp",
      rh:    "farmgo/sensor/air/rh",
      co2:   "farmgo/sensor/air/co2",
      light: "farmgo/sensor/light/on" // 0/1
    };

    function toNumber(payload){
      if(typeof payload === 'number' && !Number.isNaN(payload)) return payload;
      if(typeof payload === 'string'){
        const n = Number(payload.trim()); if(!Number.isNaN(n)) return n;
        try{ const o = JSON.parse(payload); return toNumber(o); }catch{}
        return null;
      }
      if(payload && typeof payload === 'object'){
        for(const k of ['v','value','a']){
          const n = Number(payload[k]); if(!Number.isNaN(n)) return n;
        }
      }
      return null;
    }

    let ws, retry;
    function connect(){
      clearTimeout(retry);
      ws = new WebSocket(WS_URL);
      console.log('Connecting WS:', WS_URL);

      ws.onopen   = () => console.log('‚úÖ WS connected');
      ws.onerror  = () => console.warn('‚ö†Ô∏è WS error');
      ws.onclose  = () => { console.warn('‚ùå WS disconnected'); retry = setTimeout(connect, 1500); };

      ws.onmessage = (evt) => {
        // ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö: { "topic": "xxx", "payload": any }
        try{
          const msg = JSON.parse(evt.data);
          const t   = String(msg.topic || '');
          const val = toNumber(msg.payload);
          if(val == null) return;

          if(t === topics.air)   setGauge(document.getElementById('gAir'),   val);
          else if(t === topics.rh)    setGauge(document.getElementById('gRH'),    val);
          else if(t === topics.co2)   setGauge(document.getElementById('gCO2'),   val);
          else if(t === topics.light) setGauge(document.getElementById('gLight'), val ? 1 : 0);
        }catch{ /* not JSON ‚Üí skip */ }
      };
    }

    // ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏Å‡πà‡∏≠‡∏ô WS ‡∏°‡∏≤‡∏ñ‡∏∂‡∏á)
    setGauge(document.getElementById('gAir'), 30);
    setGauge(document.getElementById('gRH'), 55);
    setGauge(document.getElementById('gCO2'), 1200);
    setGauge(document.getElementById('gLight'), 1);

    connect();
  </script>

  <!-- =======================
       Dark/Light toggle (‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô)
       ======================= -->
  <script>
    (function(){
      const BTN = document.querySelector('.darklight');
      const ROOT = document.body;
      function setBtnLabel(){
        const saved = localStorage.getItem('themeIcon') || 'dark';
        BTN.textContent = (saved === 'dark') ? 'üåô Dark' : '‚òÄÔ∏è Light';
      }
      BTN.addEventListener('click', ()=>{
        const cur = localStorage.getItem('themeIcon') || 'dark';
        const next = (cur === 'dark') ? 'light' : 'dark';
        localStorage.setItem('themeIcon', next);
        setBtnLabel();
        // (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏°‡∏à‡∏£‡∏¥‡∏á ‡πÉ‡∏™‡πà/‡πÄ‡∏≠‡∏≤ class .theme-dark ‡∏ó‡∏µ‡πà ROOT)
        // ROOT.classList.toggle('theme-dark');
      });
      setBtnLabel();
    })();
  </script>

  <!-- =======================
       ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°)
       ======================= -->
  <script>
    function setRoomData(){
      document.getElementById('nur-recipe').textContent = 'RX-01';
      document.getElementById('nur-nt').textContent = 25;
      document.getElementById('nur-ec').textContent = 1.2;
      document.getElementById('nur-ph').textContent = 6;

      document.getElementById('clm-name').textContent = 'CL-01';
      document.getElementById('clm-air').textContent = 25;
      document.getElementById('clm-rh').textContent = 70;
      document.getElementById('clm-co2').textContent = 1000;
      document.getElementById('clm-light').textContent = 12;

      document.getElementById('r1-recipe').textContent = 'RX-11';
      document.getElementById('r2-recipe').textContent = 'RX-12';
    }
    setRoomData();

    // ‡∏ß‡∏≤‡∏î‡πÄ‡∏™‡πâ‡∏ô sparkline ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°)
    function sparkPath(vals){
      const W=300,H=140, pt=[10,70,130,190,250], top=20, bot=120;
      const ys = vals.map(v => bot - (bot - top) * v);
      return `M${pt[0]},${ys[0]} ${pt[1]},${ys[1]} ${pt[2]},${ys[2]} ${pt[3]},${ys[3]} ${pt[4]},${ys[4]}`;
    }
    document.querySelector('.spark path.s1').setAttribute('d', sparkPath([0.1,0.35,0.55,0.9,0.75]));
    document.querySelector('.spark path.s2').setAttribute('d', sparkPath([0.1,0.25,0.2,0.45,0.45]));
    document.querySelector('.spark path.s3').setAttribute('d', sparkPath([0.1,0.42,0.35,0.6,0.5]));
  </script>
</body>
</html>
